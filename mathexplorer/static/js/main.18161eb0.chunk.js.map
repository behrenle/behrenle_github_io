{"version":3,"sources":["i18n/index.ts","components/app/navbar/NavbarItem.tsx","components/app/navbar/Navbar.tsx","themes/light.ts","themes/dark.ts","hooks/useSettings.tsx","hooks/useTheme.tsx","components/app/GlobalStyle.tsx","components/common/InputText.tsx","store/session/actions.ts","components/views/calculator/common/InputField.tsx","hooks/useHotkey.tsx","hooks/useHotkeyRef.tsx","hooks/useRefEffect.tsx","components/views/calculator/common/utils.tsx","components/common/Sidebar.tsx","hooks/useAnalyticsEvent.tsx","components/views/calculator/common/CalculatorSidebar.tsx","components/views/calculator/inputforms/InputFormWithSidebar.tsx","components/views/calculator/inputforms/SimpleInputForm.tsx","components/common/Card.tsx","components/views/calculator/inputforms/AdvancedInputForm.tsx","components/views/calculator/inputforms/document/cells/Cell.tsx","hooks/useNumberFormat.tsx","hooks/useSession.tsx","components/views/calculator/inputforms/document/cells/MathCell.tsx","components/views/calculator/inputforms/document/cells/TextCell.tsx","components/icons/Text.svg","components/icons/Math.svg","components/icons/Pen.svg","components/icons/Reload.svg","components/icons/Trash.svg","components/icons/Import.svg","components/icons/Export.svg","components/icons/Cloud.svg","components/views/calculator/inputforms/document/toolbar/IconButton.tsx","hooks/useLoadDocument.tsx","hooks/useImportDocument.tsx","hooks/useExportDocument.tsx","apis/jsonBin.tsx","hooks/useCloudUpload.tsx","components/views/calculator/inputforms/document/toolbar/DocumentInputFormToolbar.tsx","hooks/useHotkeyDispatch.tsx","components/views/calculator/inputforms/document/useDocumentHotkeys.tsx","components/views/calculator/inputforms/document/DocumentInputForm.tsx","hooks/usePageView.tsx","components/views/calculator/Calculator.tsx","components/views/settings/SettingsItem.tsx","components/views/settings/Settings.tsx","components/views/manual/ManualItem.tsx","utils.ts","components/views/manual/ManualCategory.tsx","components/views/manual/Manual.tsx","components/views/about/CenteredDefinitionList.tsx","components/views/about/About.tsx","components/app/appConfig.tsx","components/views/privacyPolicy/PrivacyPolicy.tsx","components/views/cookiePolicy/CookiePolicy.tsx","components/app/cookieBanner/CookieBanner.tsx","store/settings/actions.ts","components/views/termsOfService/TermsOfService.tsx","jsonValidator.tsx","validate/validateDocument.tsx","components/views/loadDocument/DownloadDocument.tsx","components/views/uploadDocument/UploadDocument.tsx","components/app/App.tsx","store/settings/settingsUtils.ts","store/settings/reducers.ts","store/session/reducers.ts","store/index.ts","components/app/AppWrapper.tsx","store/createStore.ts","serviceWorker.ts","index.tsx"],"names":["resources","en","translation","de","i18n","use","initReactI18next","init","lng","fallbackLng","keySeparator","interpolation","escapeValue","catch","console","log","StyledLink","styled","Link","props","enabled","NavbarItem","name","path","location","useLocation","useState","active","setActive","useTranslation","t","useEffect","pathname","to","toString","Container","header","theme","navbar","backgroundColor","Nav","nav","Logo","img","navbarHeight","Title","span","UL","ul","Navbar","title","items","src","process","alt","aria-label","map","item","index","lightTheme","app","backgroundImage","color","navbarItem","hoverBackgroundColor","card","cardHeading","sidebar","sidebarItem","inputText","outline","icon","filter","borderColor","documentCell","borderSelectedColor","darkTheme","useSettings","useSelector","state","settings","themes","fontSizes","l","m","s","getFontSize","size","getNavbarHeight","useTheme","interfaceSettings","fontSize","showBackgroundImage","getTheme","GlobalStyle","createGlobalStyle","length","InputText","input","changeCurrentInput","type","payload","pushMathCell","content","language","significantDigits","selectCell","setEditCell","value","deleteCell","InputField","React","forwardRef","forwardedRef","dispatch","useDispatch","session","currentInput","interfaceLanguage","mathLanguage","mathSettings","numberFormat","ref","role","placeholder","onChange","event","target","onKeyPress","key","hotkeyOptions","useHotkey","hotkey","callback","deps","useHotkeys","useHotkeyRef","effect","current","useRefEffect","getMathCells","cells","flatMap","cell","aside","Sidebar","children","useAnalyticsEvent","category","action","label","useAnalytics","CalculatorSidebar","inputForm","analyticsEvent","onClick","div","InputFormWithSidebar","StyledOutputField","SimpleInputForm","lastOutput","lastCell","slice","output","getLastOutput","document","outputRef","useRef","inputRef","r","focus","select","focusInput","focusOutput","readOnly","Card","section","MathHistoryContainer","MathHistoryContainerWrapper","MathHistoryItemContainer","showCellNumbers","MathHistoryItemLineCounter","MathHistoryItemLabel","MathHistoryItemValue","copyable","MathHistoryItem","copyOnClick","copyCellContentOnClick","showLineNumbers","cellLanguageTag","languageTag","lang","MathHistory","containerRef","scrollTop","scrollHeight","AdvancedInputForm","mathHistory","i","Cell","li","selected","useNumberFormat","useSession","edit","Input","Label","Value","MathCell","inputValue","setInputValue","saved","setSaved","editCell","selectedCell","updateMathCell","onDoubleClick","onKeyDown","TextArea","textarea","TextCell","setValue","textAreaRef","style","height","updateTextCell","documentHotkeys","newLine","Button","button","Img","IconButton","disabled","labelParts","split","analyticsCategory","join","analyticsAction","useLoadDocument","documentData","setDocumentData","loadDocument","useImportDocument","a","window","showOpenFilePicker","fileHandle","getFile","file","text","data","JSON","parse","Array","forEach","uuid","loadData","error","useExportDocument","stringify","options","types","description","accept","showSaveFilePicker","createWritable","writable","write","close","saveData","baseUrl","collectionId","apiKey","fetchBin","id","fetch","method","headers","then","response","json","createBin","bin","body","useCloudUpload","history","useHistory","push","Wrapper","DocumentInputFormToolbar","importDocument","exportDocument","cloudUpload","PenIcon","TextIcon","MathIcon","ReloadIcon","TrashIcon","deleteCellAction","ImportIcon","ExportIcon","CloudIcon","useHotkeyDispatch","condition","dispatchAction","setDispatchAction","e","preventDefault","useDocumentHotkeys","openDocument","saveDocument","toggleEditCell","deleteSelectedCell","moveCellSelectionDown","moveCellSelectionUp","moveToStartOfDocument","moveToEndOfDocument","Document","main","CellList","DocumentInputForm","usePageView","pageview","getOutput","selectInputForm","Calculator","currentOutput","clearInput","clearOutput","clearMemory","clearAll","copyInputAndOutput","navigator","clipboard","writeText","Select","SettingsItem","setter","aria-labelledby","option","SettingsCard","Settings","languageOptions","languageWithInheritOptions","enableOptions","fontSizeOptions","inputFormOptions","updateSettings","updatedSettings","updateInterfaceSettings","updatedValues","copyManualContentOnClick","toUpperCase","x","Synopsis","dt","Description","dd","ManualItem","synopsis","synopsisIsMath","roles","line","escapeRegExp","str","replace","camelToSnakeCase","letter","toLowerCase","ManualCategory","filterFunction","match","getHotkeysManual","hotkeys","baseStr","entries","Object","replaceAll","concat","Manual","setFilter","searchRef","hotkeysManualItems","undefined","marginBottom","nd","constants","functions","List","Item","ListItem","leftValue","rightValue","align","Content","ListItemContent","lines","CenteredDefinitionList","About","version","author","email","contributors","c","license","marginTop","dependencies","dep","charAt","substring","dangerouslySetInnerHTML","__html","url","routes","render","navbarProps","view","PrivacyPolicy","href","CookiePolicy","Text","ButtonContainer","CookieBanner","cookieBannerHasBeenAccepted","setSettings","TermsOfService","Ajv","documentScheme","required","properties","anyOf","enum","validateDocument","userData","validator","validate","StyledCard","DownloadDocument","loading","setLoading","failed","setFailed","params","doc","UploadDocument","uploadUrl","goBack","App","route","exact","component","defaultSettings","storeId","localStorageSettingsKey","saveSettings","localStorage","removeItem","setItem","initialState","settingsData","getItem","loadSettings","settingsReducer","getElementsByTagName","changeLanguage","script","numberdrive","Script","defaultState","evaluateInput","sigDigits","evaluate","parseInt","getItems","clearScope","clearUserScope","sessionReducer","createReducer","CHANGE_CURRENT_INPUT","CLEAR_CURRENT_INPUT","CLEAR_DOCUMENT_CELLS","CLEAR_MATH_USER_SCOPE","PUSH_MATH_CELL","nextState","PUSH_TEXT_CELL","UPDATE_MATH_CELL","updatedCell","_","SELECT_CELL","SET_EDIT_CELL","UPDATE_TEXT_CELL","REFRESH_MATH_CELLS","updatedCells","DELETE_CELL","LOAD_DOCUMENT","MOVE_CELL_SELECTION_UP","Math","max","MOVE_CELL_SELECTION_DOWN","min","rootReducer","combineReducers","store","createStore","initStore","AppWrapper","isLocalhost","Boolean","hostname","registerValidSW","swUrl","serviceWorker","register","scope","registration","onupdatefound","installingWorker","installing","onstatechange","controller","initialize","analyticsId","gaOptions","siteSpeedSampleRate","URL","origin","addEventListener","status","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","ReactDOM","getElementById"],"mappings":"ioRAKMA,EAAY,CACdC,GAAI,CAACC,Y,QACLC,GAAI,CAACD,Y,SAGTE,IACKC,IAAIC,KACJC,KAAK,CACFP,YACAQ,IAAK,KACLC,YAAa,KACbC,cAAc,EACdC,cAAe,CACXC,aAAa,KAElBC,MAAMC,QAAQC,KAGNX,QAAf,E,uXCjBA,IAAMY,EAAaC,YAAOC,IAAPD,CAAH,KAQR,SAACE,GAAD,MAAgD,SAAlBA,EAAMC,QAAN,oDAC8B,QAgCrDC,EAhBqB,SAAC,GAAkB,IAAjBC,EAAgB,EAAhBA,KAAMC,EAAU,EAAVA,KAClCC,EAAWC,cADiC,EAEtBC,oBAAS,GAFa,mBAE3CC,EAF2C,KAEnCC,EAFmC,OAGtCC,cAALC,EAH2C,oBAQlD,OAJAC,qBAAU,WACNH,EAAUJ,EAASQ,WAAaT,KACjC,CAACC,EAAUD,IAGV,cAACP,EAAD,CACIiB,GAAIV,EACJH,QAASO,EAAOO,WAFpB,SAGEJ,EAAER,M,kyBCvCZ,IAAMa,EAAYlB,IAAOmB,OAAV,KAGS,SAAAjB,GAAK,OAAIA,EAAMkB,MAAMC,OAAOC,mBAQ9CC,EAAMvB,IAAOwB,IAAV,KAKHC,EAAOzB,IAAO0B,IAAV,KACG,SAAAxB,GAAK,OAAIA,EAAMkB,MAAMO,gBACpB,SAAAzB,GAAK,OAAIA,EAAMkB,MAAMO,gBAI7BC,EAAQ5B,IAAO6B,KAAV,KAKLC,EAAK9B,IAAO+B,GAAV,KAuCOC,EArBiB,SAAC,GAAoB,IAAnBC,EAAkB,EAAlBA,MAAOC,EAAW,EAAXA,MAErC,OACI,eAAChB,EAAD,WACI,cAACO,EAAD,CAAMU,IAAKC,aAAsCC,IAAI,SACrD,cAACT,EAAD,CAAOU,aAAW,QAAlB,SAA2BL,IAC3B,cAACV,EAAD,CAAKe,aAAW,YAAhB,SACI,cAACR,EAAD,UAEQI,EAAMK,KAAI,SAACC,EAAMC,GAAP,OACN,6BACI,cAAC,EAAD,CAAYpC,KAAMmC,EAAKnC,KAAMC,KAAMkC,EAAKlC,QADnCmC,cClBtBC,EAzCI,CACfC,IAAK,CACDrB,gBAAiB,QACjBsB,gBAAiB,yBAErBvB,OAAQ,CACJC,gBAAiB,UACjBuB,MAAO,SAEXC,WAAY,CACRC,qBAAsB,4BAE1BC,KAAM,CACF1B,gBAAiB,QACjBuB,MAAO,SAEXI,YAAa,CACT3B,gBAAiB,uBAErB4B,QAAS,CACL5B,gBAAiB,QACjBuB,MAAO,SAEXM,YAAa,CACTJ,qBAAsB,sBAE1BK,UAAW,CACP9B,gBAAiB,QACjB+B,QAAS,kBACTR,MAAO,SAEXS,KAAM,CACFC,OAAQ,aACRC,YAAa,SAEjBC,aAAc,CACVC,oBAAqB,QACrBF,YAAa,uBCING,EAzCG,CACdhB,IAAK,CACDrB,gBAAiB,UACjBsB,gBAAiB,wBAErBvB,OAAQ,CACJC,gBAAiB,UACjBuB,MAAO,SAEXC,WAAY,CACRC,qBAAsB,4BAE1BC,KAAM,CACF1B,gBAAiB,UACjBuB,MAAO,WAEXI,YAAa,CACT3B,gBAAiB,uBAErB4B,QAAS,CACL5B,gBAAiB,UACjBuB,MAAO,SAEXM,YAAa,CACTJ,qBAAsB,4BAE1BK,UAAW,CACP9B,gBAAiB,UACjB+B,QAAS,kBACTR,MAAO,SAEXS,KAAM,CACFC,OAAQ,eACRC,YAAa,SAEjBC,aAAc,CACVC,oBAAqB,QACrBF,YAAa,6BC7BNI,EAJK,WAChB,OAAOC,aAAY,SAACC,GAAD,OAAsBA,EAAMC,aCCtCC,EAAS,CAAC,QAAS,QAE1BC,EACK,CACHC,EAAG,OACHC,EAAG,OACHC,EAAG,QAJLH,EAMM,CACJC,EAAG,OACHC,EAAG,OACHC,EAAG,QATLH,EAWK,CACHC,EAAG,OACHC,EAAG,OACHC,EAAG,QAILC,EAAc,SAACC,GACjB,OAAQA,GACJ,IAAK,QACD,OAAOL,EACX,IAAK,SACD,OAAOA,EACX,IAAK,QACD,OAAOA,EACX,QACI,OAAOA,IAebM,EAAkB,SAACD,GACrB,OAAQA,GACJ,IAAK,SACD,MAAO,OACX,IAAK,QACD,MAAO,OACX,QACI,MAAO,SAkBJE,EAdE,WACb,IAAMC,EAAoBb,IAAca,kBAClCrD,EAAQqD,EAAkBrD,MAC1BsD,EAAWD,EAAkBC,SAC7BC,EAAsBF,EAAkBE,oBAE9C,OAAO,2BA5BM,SAACvD,GACd,OAAQA,GACJ,IAAK,QACD,OAAOsB,EACX,IAAK,OACD,OAAOiB,EACX,QACI,OAAOjB,GAsBRkC,CAASxD,IADhB,IAEIsD,SAAUL,EAAYK,GACtB/C,aAAc4C,EAAgBG,GAC9BC,yB,kzBCrER,IAsCeE,EAtCKC,YAAH,KAQO,SAAA5E,GAAK,OAAIA,EAAMkB,MAAMuB,IAAIrB,mBAIrC,SAAApB,GAAK,OAAIA,EAAMkB,MAAMuB,IAAIC,gBAAgBmC,OAAS,GAAK7E,EAAMkB,MAAMuD,oBAA1D,gCAC0BvC,IAAyBlC,EAAMkB,MAAMuB,IAAIC,gBADnE,MACyF,QAMpF,SAAA1C,GAAK,OAAIA,EAAMkB,MAAMO,gBAY9B,SAAAzB,GAAK,OAAIA,EAAMkB,MAAMsD,SAASP,K,iRC/B/C,IAaea,EAbGhF,IAAOiF,MAAV,KAKS,SAAA/E,GAAK,OAAIA,EAAMkB,MAAMgC,UAAU9B,mBAC1C,SAAApB,GAAK,OAAIA,EAAMkB,MAAMgC,UAAUP,SAGzB,SAAA3C,GAAK,OAAIA,EAAMkB,MAAMgC,UAAUC,WCIrC6B,EAAqB,SAACD,GAC/B,MAAO,CACHE,KAAM,uBACNC,QAASH,IAUJI,EAAe,SAACC,EAAiBC,EAAoBC,GAC9D,MAAO,CACHL,KAAM,iBACNC,QAAS,CACLE,UACAC,WACAC,uBAoCCC,EAAa,SAAChD,GACvB,MAAO,CACH0C,KAAM,cACNC,QAAS3C,IAIJiD,EAAc,SAACC,GACxB,MAAO,CACHR,KAAM,gBACNC,QAASO,IAoBJC,EAAa,SAACnD,GACvB,MAAO,CACH0C,KAAM,cACNC,QAAS3C,IC/DFoD,EAjCIC,IAAMC,YAAW,SAAC7F,EAAO8F,GACxC,IAAMC,EAAWC,cACXP,EAAQ9B,aAAY,SAACC,GAAD,OAAsBA,EAAMqC,QAAQC,gBACxDC,EAAoBxC,aAAY,SAACC,GAAD,OAAsBA,EAAMC,SAASU,kBAAkBc,YACvFe,EAAezC,aAAY,SAACC,GAAD,OAAsBA,EAAMC,SAASwC,aAAaC,gBAC7EhB,EAAoB3B,aAAY,SAACC,GAAD,OAAsBA,EAAMC,SAASwC,aAAaf,qBAL/B,EAM7C5E,cAALC,EANkD,oBAsBzD,OAAQ,cAAC,EAAD,CAAW4F,IAAKT,EACpBb,KAAK,OACLuB,KAAK,aACLC,YAAa9F,EAAE,gBACfyB,aAAYzB,EAAE,gBACd+F,SAnBgB,SAACC,GACjBZ,EAASf,EAAmB2B,EAAMC,OAAOnB,SAmBzCoB,WAhBkB,SAACF,GACD,UAAdA,EAAMG,KACNf,EAASZ,EACLM,EACiB,YAAjBW,EAA6BD,EAAoBC,EACjDd,KAYRG,MAAOA,O,kBCjCFsB,GAAgB,CAAC1D,OADT,kBAAM,IAOZ2D,GAJG,SAACC,EAAgBC,EAA0CC,GACzEC,aAAWH,EAAQC,EAAUH,GAAeI,ICIjCE,GAPM,SAACJ,EAAgBV,EAA2Be,GAC7DN,GAAUC,GAAQ,WACVV,EAAIgB,SACJD,EAAOf,KACZ,KCGQiB,GARM,SAACjB,EAA2Be,GAAmE,IAAtBH,EAAqB,uDAAP,GACxGvG,qBAAU,WACF2F,EAAIgB,SACJD,EAAOf,KAEZY,ICLMM,GAAe,SAACC,GACzB,OAAOA,EAAMC,SAAQ,SAAAC,GAAI,MAAkB,SAAdA,EAAK3C,KAAkB,CAAC2C,GAAQ,O,urBCAjE,IAAM5G,GAAYlB,IAAO+H,MAAV,MACS,SAAA7H,GAAK,OAAIA,EAAMkB,MAAM8B,QAAQ5B,mBACxC,SAAApB,GAAK,OAAIA,EAAMkB,MAAM8B,QAAQL,SASrB,SAAA3C,GAAK,OAAIA,EAAMkB,MAAMsD,SAASP,KAOvB,SAAAjE,GAAK,OAAIA,EAAMkB,MAAM+B,YAAYJ,wBAsB9CiF,GARe,SAAC,GAAgB,IAAfC,EAAc,EAAdA,SAC5B,OACI,cAAC,GAAD,CAAWvB,KAAK,UAAhB,SACKuB,K,SCrBEC,GAdW,WACtB,IAAMnE,EAAWH,IAEjB,OAAO,SAACuE,EAAkBC,EAAgBC,EAAgB1C,GAClD5B,EAASuE,cACTzB,aAAM,CACFsB,WACAC,SACAC,QACA1C,YCyDD4C,GA7DqB,WAChC,IAAMtC,EAAWC,cADqB,EAE1BtF,cAALC,EAF+B,oBAGhC2H,EAAY3E,aAAY,SAACC,GAAD,OAAsBA,EAAMC,SAASU,kBAAkB+D,aAC/EC,EAAiBP,KAwBvB,OACI,eAAC,GAAD,WACI,wBACIQ,QAlBS,WACjBzC,ERkBG,CACHd,KAAM,yBQlBNsD,EAAe,4BAA6B,kBAiBpCnG,aAAYzB,EAAgB,WAAd2H,EAAyB,2BAA6B,2BAFxE,SAIK3H,EAAgB,WAAd2H,EAAyB,2BAA6B,6BAE7D,wBACIE,QAnBO,WACfzC,ERJG,CACHd,KAAM,wBQINsD,EAAe,4BAA6B,gBAkBpCnG,aAAYzB,EAAE,0BAFlB,SAIKA,EAAE,4BAEP,wBACI6H,QApBW,WACnBzC,ERcG,CACHd,KAAM,0BQdNsD,EAAe,4BAA6B,qBAmBpCnG,aAAYzB,EAAE,2BAFlB,SAIKA,EAAE,6BAEP,wBACI6H,QA3CK,WACbzC,ERyBG,CACHd,KAAM,yBQzBNc,EROG,CACHd,KAAM,wBQPNc,ER6BG,CACHd,KAAM,0BQ7BNsD,EAAe,4BAA6B,cAwCpCnG,aAAYzB,EAAE,wBAFlB,SAIKA,EAAE,8B,sJCxDnB,IAAMK,GAAYlB,IAAO2I,IAAV,MAeAC,GATwB,SAAC,GAAgB,IAAfX,EAAc,EAAdA,SACrC,OACI,eAAC,GAAD,WACI,cAAC,GAAD,IACCA,M,sOCDb,IAAM/G,GAAYlB,IAAO2I,IAAV,MAMTE,GAAoB7I,YAAOgF,EAAPhF,CAAH,MA0CR8I,GAtCmB,WAC9B,IAAMC,ELlBmB,SAACnB,GAC1B,IAAMoB,EAAWrB,GAAaC,GAAOqB,OAAO,GAAG,GAC/C,OAAOD,EAAWA,EAASE,OAAS,GKgBjBC,CAActF,aAAY,SAACC,GAAD,OAAsBA,EAAMqC,QAAQiD,SAASxB,UACpFyB,EAAYC,iBAAyB,MACrCC,EAAWD,iBAAyB,MAHN,EAIxB1I,cAALC,EAJ6B,oBAKpC6G,GAAa2B,GAAW,SAAAG,GACpBA,EAAE/B,QAAQgC,QACVD,EAAE/B,QAAQiC,WACX,CAACX,IACJrB,GAAa6B,GAAU,SAAAC,GAAC,OAAIA,EAAE/B,QAAQgC,WACtClC,GAAaoC,cAAYJ,GAAU,SAACC,GAAD,OAAOA,EAAE/B,QAAQgC,WACpDlC,GAAaqC,eAAaP,GAAW,SAACG,GAAD,OAAOA,EAAE/B,QAAQgC,WAQtD,OACI,cAAC,GAAD,UACI,eAAC,GAAD,WACI,cAAC,EAAD,CAAYhD,IAAK8C,EAAUjH,aAAYzB,EAAE,kBACzC,cAACgI,GAAD,CACIvG,aAAYzB,EAAE,iBACd6F,KAAK,aACLvB,KAAK,OACL0E,UAAU,EACVlD,YAAa9F,EAAE,iBACf8E,MAAOoD,EACPtC,IAAK4C,EACLtC,WAlBS,SAACF,GACJ,UAAdA,EAAMG,KAAmBuC,EAAS9B,SAClC8B,EAAS9B,QAAQgC,iB,ufCpC7B,IA2BeK,GA3BF9J,IAAO+J,QAAV,MACC,SAAA7J,GAAK,OAAIA,EAAMkB,MAAM4B,KAAKH,SACf,SAAA3C,GAAK,OAAIA,EAAMkB,MAAM4B,KAAK1B,mBAEjC,SAAApB,GAAK,OAAIA,EAAMkB,MAAMsD,SAASP,KAG5B,SAAAjE,GAAK,OAAIA,EAAMkB,MAAMsD,SAASR,KAQ9B,SAAAhE,GAAK,OAAIA,EAAMkB,MAAMsD,SAASP,K,ooCCH/C,IAAMjD,GAAYlB,IAAO2I,IAAV,MAQTqB,GAAuBhK,IAAO2I,IAAV,MAMpBsB,GAA8BjK,YAAO8J,GAAP9J,CAAH,MAS3BkK,GAA2BlK,IAAO2I,IAAV,MAEH,SAAAzI,GAAK,OAAIA,EAAMiK,gBAAkB,gBAAkB,cAMxEC,GAA6BpK,IAAO2I,IAAV,MAO1B0B,GAAuBrK,IAAO2I,IAAV,MAQpB2B,GAAuBtK,IAAO6B,KAAV,MAGhB,SAAA3B,GAAK,OAAIA,EAAMqK,SAAW,oDAAsD,QAUpFC,GAAkD,SAAC,GAA4B,IAA3B/H,EAA0B,EAA1BA,MAAOwC,EAAmB,EAAnBA,MAAOiE,EAAY,EAAZA,OAAY,EACpEtI,cAALC,EADyE,oBAE1E4J,EAAc5G,aAAY,SAACC,GAAD,OAAsBA,EAAMC,SAASU,kBAAkBiG,0BACjFP,EAAkBtG,aAAY,SAACC,GAAD,OAAsBA,EAAMC,SAASU,kBAAkBkG,mBACrFpF,EAAW1B,aAAY,SAACC,GAAD,OAAsBA,EAAMC,SAASU,kBAAkBc,YAC9EqF,EAAkB/G,aAAY,SAACC,GAAD,OAAsBA,EAAMC,SAASU,kBAAkBmG,mBACrF3E,EAAWC,cAEX2E,EAAkC,YAApBD,EAAgCrF,EAAWqF,EAEzDlC,EAAU,SAACvD,GACTsF,GACAxE,EAASf,EAA4B,UAATC,EACtBF,EACAiE,KAId,OACI,eAACgB,GAAD,CAA0BC,gBAAiBA,EAA3C,UACKA,EAAkB,eAACC,GAAD,eAA8B3H,EAAQ,KAAkC,KAC3F,cAAC4H,GAAD,UAAuBxJ,EAAE,kBACzB,eAACyJ,GAAD,CACIQ,KAAMD,EACNN,SAAUE,EACV/B,QAAS,kBAAMA,EAAQ,UAH3B,cAIGzD,KACH,cAACoF,GAAD,UAAuBxJ,EAAE,mBACzB,eAACyJ,GAAD,CACIQ,KAAMD,EACNN,SAAUE,EACV/B,QAAS,kBAAMA,EAAQ,WAH3B,cAIGQ,SAKT6B,GAA2D,SAAC,GAAa,IAAZ7I,EAAW,EAAXA,MACzD8I,EAAe1B,iBAAuB,MAO5C,OALAxI,qBAAU,WACFkK,EAAavD,UACbuD,EAAavD,QAAQwD,UAAYD,EAAavD,QAAQyD,gBAC3D,CAAChJ,IAGA,cAAC+H,GAAD,CAA6BxD,IAAKuE,EAAlC,SACI,cAAChB,GAAD,UAEQ9H,EAAMK,KAAI,SAAAC,GAAI,OAAI,cAAC,GAAD,CAEdC,MAAOD,EAAKC,MACZwC,MAAOzC,EAAKyC,MACZiE,OAAQ1G,EAAK0G,QAHR1G,EAAKC,eA+BnB0I,GApBqB,WAChC,IAAMC,EAAczD,GAAa9D,aAAY,SAACC,GAAD,OAAsBA,EAAMqC,QAAQiD,SAASxB,UACpF2B,EAAWD,iBAAyB,MAFJ,EAG1B1I,cAALC,EAH+B,oBAUtC,OANAyG,aAAWqC,eAAY,WACfJ,EAAS9B,SACT8B,EAAS9B,QAAQgC,UACtB,CAAClG,OAAQ,kBAAM,IAAO,IACzBmE,GAAa6B,GAAU,SAACC,GAAD,OAAOA,EAAE/B,QAAQgC,UAAS,IAG7C,cAAC,GAAD,UACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAavH,MAAOkJ,EAAY7I,KAAI,SAACC,EAAM6I,GAAP,mBAAC,eAAiB7I,GAAlB,IAAwBC,MAAO4I,SACnE,cAAC,EAAD,CAAY5E,IAAK8C,EAAUjH,aAAYzB,EAAE,wB,gQClJzD,IAwBeyK,GAxBFtL,IAAOuL,GAAV,MAEN,SAAArL,GAAK,OAAuB,IAAnBA,EAAMsL,SAAN,yBACiBtL,EAAMkB,MAAMqC,aAAaC,oBAD1C,gKAKqBxD,EAAMkB,MAAMqC,aAAaD,YAL9C,sCCKEiI,GAPS,WACpB,IAAM1H,EAAWH,IACjB,MAA8C,YAAvCG,EAASwC,aAAaC,aACvBzC,EAASU,kBAAkBc,SAC3BxB,EAASwC,aAAaC,cCCjBkF,GAJI,WACf,OAAO7H,aAAY,SAACC,GAAD,OAAsBA,EAAMqC,Y,gkBCOnD,IAAMjF,GAAYlB,YAAOsL,GAAPtL,CAAH,MAGY,SAAAE,GAAK,OAAKA,EAAMyL,KAAoB,MAAb,cAG5CC,GAAQ5L,YAAOgF,EAAPhF,CAAH,MAWL6L,GAAQ7L,IAAOqI,MAAV,MACI,SAAAnI,GAAK,OAAIA,EAAMkB,MAAMsD,SAASN,KAwFvC0H,GAAQ9L,IAAO6B,KAAV,MAQIkK,GA1F2B,SAAC,GAA4B,IAA3B9G,EAA0B,EAA1BA,MAAOiE,EAAmB,EAAnBA,OAAQzG,EAAW,EAAXA,MACjDsB,EAAWH,IACXuC,EAAUuF,KACVzF,EAAWC,cACXM,EAAeiF,KAJ6C,EAK9BhL,mBAASwE,GALqB,mBAK3D+G,EAL2D,KAK/CC,EAL+C,OAMxCxL,oBAAS,GAN+B,mBAM3DyL,EAN2D,KAMpDC,EANoD,KAO5D5C,EAAWD,iBAAyB,MAPwB,EAQtD1I,cAALC,EAR2D,oBAUlEC,qBAAU,WACFqF,EAAQiG,UAAYjG,EAAQkG,eAAiB5J,GACzC8G,EAAS9B,SACT8B,EAAS9B,QAAQgC,UAC1B,CAACF,EAAUpD,EAAQiG,SAAUjG,EAAQkG,aAAc5J,IAEtD3B,qBAAU,WACFoL,GAAU/F,EAAQiG,WAClBnG,EhBKkB,SAAChB,EAAexC,EAAe8C,EAAoBC,GAC7E,MAAO,CACHL,KAAM,mBACNC,QAAS,CACLG,WACAC,oBACAP,QACAxC,UgBZS6J,CAAeN,EAAYvJ,EAAO+D,EAAczC,EAASwC,aAAaf,oBAC/E2G,GAAS,MAEd,CAACD,EAAO/F,EAAQiG,SAAUnG,EAAUxD,EAAOuJ,EAAYxF,EAAczC,EAASwC,aAAaf,oBA2B9F,OACI,cAAC,GAAD,CACIkD,QA3Ba,WACbvC,EAAQkG,eAAiB5J,IACzBwD,EAASP,GAAY,IACrBO,EAASR,EAAWhD,MAyBpB+I,SAAU/I,IAAU0D,EAAQkG,aAC5BE,cAtBc,WAClBtG,EAASR,EAAWhD,IACpBwD,EAASP,GAAY,KAqBjBiG,KAAMxF,EAAQiG,UAAY3J,IAAU0D,EAAQkG,aAJhD,SAOQlG,EAAQiG,UAAY3J,IAAU0D,EAAQkG,aAClC,8BACI,cAACT,GAAD,CACInF,IAAK8C,EACL5D,MAAOqG,EACPpF,SA1BP,SAACC,GACdoF,EAAcpF,EAAMC,OAAOnB,OAC3BwG,GAAS,IAyBWK,UAtBN,SAAC3F,GACG,WAAdA,EAAMG,MACNiF,EAAchH,GACdkH,GAAS,GACTlG,EAASP,GAAY,UAsBb,qCACI,cAACmG,GAAD,UACKhL,EAAE,kBAEP,cAACiL,GAAD,UAAQ7G,IACR,cAAC4G,GAAD,UACKhL,EAAE,mBAEP,cAACiL,GAAD,UAAQ5C,U,0lCCnGhC,IAAMhI,GAAYlB,YAAOsL,GAAPtL,CAAH,MAmETyM,GAAWzM,IAAO0M,SAAV,MAiFCC,GAtE2B,SAAC,GAAsB,IAArBlK,EAAoB,EAApBA,MAAO6C,EAAa,EAAbA,QACzCW,EAAWC,cACXC,EAAUuF,KAF4C,EAGlCjL,mBAAS6E,GAHyB,mBAGrDK,EAHqD,KAG9CiH,EAH8C,OAIlCnM,oBAAS,GAJyB,mBAIrDyL,EAJqD,KAI9CC,EAJ8C,KAKtDU,EAAcvD,iBAA4B,MAChDxI,qBAAU,WACF+L,EAAYpF,SAAWtB,EAAQkG,eAAiB5J,GAAS0D,EAAQiG,UACjES,EAAYpF,QAAQgC,UACzB,CAACtD,EAAQiG,SAAUjG,EAAQkG,aAAc5J,IAC5C3B,qBAAU,WACoB,IAAD,EAArB+L,EAAYpF,UAEZoF,EAAYpF,QAAQqF,MAAMC,QAAS,UAAAF,EAAYpF,eAAZ,eAAqByD,cAAe,QAE7E,CAACvF,EAAOQ,EAAQiG,WAClBtL,qBAAU,WACDqF,EAAQiG,UAAaF,IACtBjG,EjBtBkB,SAACxD,EAAe6C,GAC1C,MAAO,CACHH,KAAM,mBACNC,QAAS,CAAC3C,QAAO6C,YiBmBJ0H,CAAevK,EAAOkD,IAC/BwG,GAAS,MAEd,CAAChG,EAAQiG,SAAUF,EAAOjG,EAAUxD,EAAOkD,EAAOwG,IACrD7E,aAAW2F,YAAgBC,SAAS,WAChCN,EAAS,GAAD,OAAIjH,EAAJ,SACT,CAACA,IA0BJ,OACI,cAAC,GAAD,CACI6F,SAAU/I,IAAU0D,EAAQkG,aAC5B3D,QA3Be,WACfjG,IAAU0D,EAAQkG,eAClBpG,EAASP,GAAY,IACrBO,EAASR,EAAWhD,MAyBpB8J,cArBc,WAClBtG,EAASP,GAAY,KAiBrB,SAMQjD,IAAU0D,EAAQkG,cAAgBlG,EAAQiG,SACnC,cAACK,GAAD,CACChG,IAAKoG,EACLlH,MAAOA,EACPiB,SAxBA,SAACC,GACjB+F,EAAS/F,EAAMC,OAAOnB,OACtBwG,GAAS,IAuBOK,UApBF,SAAC3F,GACG,WAAdA,EAAMG,MACN4F,EAAStH,GACT6G,GAAS,GACTlG,EAASP,GAAY,QAkBV,cAAC,KAAD,CAAeuC,SAAU3C,OCxJjC,OAA0B,iCCA1B,OAA0B,iCCA1B,OAA0B,gCCA1B,OAA0B,mCCA1B,OAA0B,kCCA1B,OAA0B,mCCA1B,OAA0B,mCCA1B,OAA0B,kC,gpBCKzC,IAAM6H,GAASnN,IAAOoN,OAAV,MACC,SAAAlN,GAAK,OAAIA,EAAMQ,OAAS,IAAM,SAGrB,SAAAR,GAAK,OAAIA,EAAMQ,OAASR,EAAMkB,MAAM+B,YAAYJ,qBAAuB,aAarE,SAAA7C,GAAK,OAAIA,EAAMkB,MAAMkC,KAAKE,eAC1B,SAAAtD,GAAK,OAAIA,EAAMkB,MAAM+B,YAAYJ,wBAanDsK,GAAMrN,IAAO0B,IAAV,MACG,SAAAxB,GAAK,OAAIA,EAAMkB,MAAMkC,KAAKC,UA8CvB+J,GAjCyB,SAAC,GAMjC,IALHnL,EAKE,EALFA,IACAuG,EAIE,EAJFA,QACA6E,EAGE,EAHFA,SACA7M,EAEE,EAFFA,OACA2H,EACE,EADFA,MAEKI,EAAiBP,KADpB,EAEStH,cAALC,EAFJ,oBAeH,OACI,cAACsM,GAAD,CACII,UAAW7E,GAAW6E,EACtB7M,SAAUA,EACVgI,QAfa,WACjB,GAAOA,IAAW6E,EAAW,CACzB,IAAMC,EAAanF,EAAMoF,MAAM,KACzBC,EAAoBF,EAAWvE,MAAM,EAAGuE,EAAWzI,OAAS,GAAG4I,KAAK,KACpEC,EAAkBJ,EAAWA,EAAWzI,OAAS,GAEvD0D,EAAeiF,EAAmBE,GAClClF,MASApG,aAAYzB,EAAEwH,GAJlB,SAMI,cAACgF,GAAD,CAAKlL,IAAKA,O,uCC3DP0L,GAdS,WAAO,IAAD,EACcpN,mBAA8B,MAD5C,mBACnBqN,EADmB,KACLC,EADK,KAEpB9H,EAAWC,cASjB,OAPApF,qBAAU,WACe,OAAjBgN,IACA7H,E3BgGgB,SAACmD,GACzB,MAAO,CACHjE,KAAM,gBACNC,QAASgE,G2BnGI4E,CAAaF,IACtBC,EAAgB,UAIjBA,GCwBIE,GArCW,WACtB,IAAMD,EAAeH,KAErB,OAAO,YACW,yCAAG,uCAAAK,EAAA,sEAEcC,OAAOC,qBAFrB,0CAENC,EAFM,cAGMA,EAAWC,UAHjB,cAGPC,EAHO,iBAISA,EAAKC,OAJd,WAIPlJ,EAJO,OAMO,kBADdmJ,EAAOC,KAAKC,MAAMrJ,IALX,oBAOiB,kBAAfmJ,EAAKxM,MAPP,sBAQDwM,EAAK7G,iBAAiBgH,OARrB,wBASDH,EAAK7G,MAAMiH,SAAQ,SAAC/G,GAChB,IAAkB,SAAdA,EAAK3C,MAAyC,kBAAf2C,EAAK7C,OAA6C,kBAAhB6C,EAAKoB,UAExD,SAAdpB,EAAK3C,MAA2C,kBAAjB2C,EAAKxC,SAExC,KAAM,iCAEV0I,EAAa,CACT/L,MAAOwM,EAAKxM,MACZ2F,MAAO6G,EAAK7G,MAAMrF,KAAI,SAACuF,GAAD,MAA6B,SAAdA,EAAK3C,KACpC,CAACA,KAAM,OAAQ2J,KAAMA,eAAQ7J,MAAO6C,EAAK7C,MAAOiE,OAAQpB,EAAKoB,QAC7D,CAAC/D,KAAM,OAAQ2J,KAAMA,eAAQxJ,QAASwC,EAAKxC,cApBpD,gCA2BP,8BA3BO,4CAAH,qDA6BdyJ,GAAWnP,MAAMC,QAAQmP,SCTlBC,GAxBW,WACtB,IAAM9I,EAAUuF,KAEhB,OAAO,WACH,IAAMoC,EAAeY,KAAKQ,UAAU/I,EAAQiD,SAAU,KAAM,IAC9C,yCAAG,iCAAA8E,EAAA,6DACPiB,EAAU,CACZC,MAAO,CAAC,CACJC,YAAa,aACbC,OAAQ,CACJ,mBAAoB,CAAC,aALpB,SAUYnB,OAAOoB,mBAAmBJ,GAVtC,cAUPd,EAVO,gBAWUA,EAAWmB,iBAXrB,QAWPC,EAXO,QAYJC,MAAM5B,GACf2B,EAASE,QAbI,2CAAH,qDAedC,GAAWhQ,MAAMC,QAAQmP,SCvB3Ba,GAAU,yBACVC,GAAe1N,2BACf2N,GAAS3N,qEAEfvC,QAAQC,IAAI,cACZD,QAAQC,IAAI,SAAUiQ,IACtBlQ,QAAQC,IAAI,eAAgBgQ,IAErB,IAAME,GAAQ,yCAAG,WAAOC,GAAP,UAAA/B,EAAA,sEACPgC,MAAM,GAAD,OAAIL,GAAJ,cAAiBI,GAAM,CACrCE,OAAQ,MACRC,QAAS,CACL,aAAcL,MAGjBM,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1B3Q,MAAMC,QAAQmP,OARC,mFAAH,sDAuBRwB,GAAS,yCAAG,WAAOC,GAAP,UAAAvC,EAAA,sEACRgC,MAAM,GAAD,OAAIL,GAAJ,MAAiB,CAC/BM,OAAQ,OACRC,QAAS,CACL,aAAcL,GACd,eAAgB,mBAChB,gBAAiBD,IAErBY,KAAMhC,KAAKQ,UAAUuB,KACtBJ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAAQF,MAAK,SAAA5B,GAA+B,OAAtB5O,QAAQC,IAAI2O,EAAKwB,IAAYxB,EAAKwB,MAThE,mFAAH,sDChBPU,GAXQ,WACnB,IAAMvH,EAAWsC,KAAatC,SACxBwH,EAAUC,cAEhB,OAAO,WACHL,GAAUpH,GACLiH,MAAK,SAAAJ,GAAE,OAAIW,EAAQE,KAAR,2BAAiCb,OAC5CrQ,MAAMC,QAAQmP,S,4VCiB3B,IAAM+B,GAAU/Q,IAAO2I,IAAV,MAKPzH,GAAYlB,IAAO2I,IAAV,MAIO,SAAAzI,GAAK,OAAIA,EAAMkB,MAAM4B,KAAK1B,mBAmGjC0P,GA9F4B,WACvC,IAAM/K,EAAWC,cACXC,EAAUuF,KACV3H,EAAWH,IACX4C,EAAeiF,KACfwF,EAAiBhD,KACjBiD,EAAiBjC,KACjBkC,EAAcR,KAmCpB,OACI,cAACI,GAAD,UACI,eAAC,GAAD,WACI,cAAC,GAAD,CACI5O,IAAKiP,GACL1I,QA1BO,WACnBzC,EAASP,GAAaS,EAAQiG,YA0BlB1L,OAAQyF,EAAQiG,SAChB/D,MAAM,iDAGV,cAAC,GAAD,CACIlG,IAAKkP,GACL3I,QAvCI,WAChBzC,EAASR,EAAWU,EAAQiD,SAASxB,MAAM7C,SAC3CkB,EhCPG,CACHd,KAAM,iBACNC,QgCKsB,KACtBa,EAASP,GAAY,KAqCT2C,MAAM,8CAEV,cAAC,GAAD,CACIlG,IAAKmP,GACL5I,QAlDI,WAChBzC,EAASR,EAAWU,EAAQiD,SAASxB,MAAM7C,SAC3CkB,EAASZ,EAAa,GAAImB,EAAczC,EAASwC,aAAaf,oBAC9DS,EAASP,GAAY,KAgDT2C,MAAM,8CAEV,cAAC,GAAD,CACIlG,IAAKoP,GACL7I,QAvCA,WhCwBY,IAACnD,EAAoBC,EgCvB7CS,GhCuByBV,EgCvBCiB,EhCuBmBhB,EgCvBLzB,EAASwC,aAAaf,kBhCwB3D,CACHL,KAAM,qBACNC,QAAS,CACLG,WAAUC,yBgCYF+H,WA/BL5F,GAAaxB,EAAQiD,SAASxB,OAAO7C,OAAS,GAgCzCsD,MAAM,mDAEV,cAAC,GAAD,CACIlG,IAAKqP,GACL9I,QAzCG,WACfzC,EAASwL,EAAiBtL,EAAQkG,gBAyCtBkB,UAjCHpH,EAAQiD,SAASxB,MAAMzB,EAAQkG,cAkC5BhE,MAAM,4CAEV,cAAC,GAAD,CACIlG,IAAKuP,GACLhJ,QAASuI,EACT5I,MAAM,gDAEV,cAAC,GAAD,CACIlG,IAAKwP,GACLjJ,QAASwI,EACT7I,MAAM,gDAEV,cAAC,GAAD,CACIlG,IAAKyP,GACLlJ,QAASyI,EACT9I,MAAM,sDC5HbpB,GAAgB,CAAC1D,OADT,kBAAM,IA4BZsO,GArBW,SAAC1K,EAAgBiB,GAA0D,IAA/B0J,IAA8B,yDAC1F7L,EAAWC,cAD+E,EAEpDzF,oBAAS,GAF2C,mBAEzFsR,EAFyF,KAEzEC,EAFyE,KAGhG9K,GAAUC,GAAQ,SAAC8K,GACXH,IACAG,EAAEC,iBACFF,GAAkB,MAEvB,CAACF,IACJhR,qBAAU,WACFiR,IACAC,GAAkB,GACd5J,aAAkBwG,MAClBxG,EAAOyG,SAAQ,SAAAX,GAAC,OAAIjI,EAASiI,MAE7BjI,EAASmC,MAGlB,CAAC2J,KCSOI,GAxBY,WACvB,IAAMhM,EAAUuF,KACVC,EAAOxF,EAAQiG,SACf6E,EAAiBhD,KACjBiD,EAAiBjC,KAEvB/H,GAAU+F,YAAgBmF,cAAc,SAACvL,GACrCA,EAAMqL,iBACNjB,OAEJ/J,GAAU+F,YAAgBoF,cAAc,SAACxL,GACrCA,EAAMqL,iBACNhB,OAEJW,GAAkB5E,YAAgBqF,eAAgB5M,GAAaS,EAAQiG,UACnEjG,EAAQkG,cAAgB,GAAKlG,EAAQkG,aAAelG,EAAQiD,SAASxB,MAAM7C,QAE/E8M,GAAkB5E,YAAgBsF,mBAAoB3M,EAAWO,EAAQkG,eAAgBV,GACzFkG,GAAkB5E,YAAgBuF,sBlC0F3B,CACHrN,KAAM,6BkC3FyEwG,GACnFkG,GAAkB5E,YAAgBwF,oBlCkF3B,CACHtN,KAAM,2BkCnFqEwG,GAC/EkG,GAAkB5E,YAAgByF,sBAAuBjN,EAAW,IAAKkG,GACzEkG,GAAkB5E,YAAgB0F,oBAAqBlN,EAAWU,EAAQiD,SAASxB,MAAM7C,OAAS,IAAK4G,I,o0BC3B3G,IAAMzK,GAAYlB,IAAO2I,IAAV,MAQJ,SAAAzI,GAAK,OAAIA,EAAMkB,MAAM4B,KAAKH,SAG/B+P,GAAW5S,IAAO6S,KAAV,MACQ,SAAA3S,GAAK,OAAIA,EAAMkB,MAAM4B,KAAK1B,mBAuB1CwR,GAAW9S,IAAO+B,GAAV,MAoCCgR,GA7BqB,WAChC,IAAMnL,EAAQ8D,KAAatC,SAASxB,MAGpC,OAFAuK,KAGI,eAAC,GAAD,WACI,cAAC,GAAD,IACA,cAACS,GAAD,UACI,cAACE,GAAD,UAEQlL,EAAMrF,KAAI,SAACuF,EAAMuD,GAAP,MAA2B,SAAdvD,EAAK3C,KACrB,cAAC,GAAD,CAECF,MAAO6C,EAAK7C,MACZiE,OAAQpB,EAAKoB,OACbzG,MAAO4I,GAHFvD,EAAKgH,MAKX,cAAC,GAAD,CAECrM,MAAO4I,EACP/F,QAASwC,EAAKxC,SAFTwC,EAAKgH,iBCxD3BkE,GARK,SAAC1S,GACjB,IAAMyD,EAAWH,IACjB9C,qBAAU,WACFiD,EAASuE,cACT2K,aAAS3S,KACd,KCMD4S,GAAY,SAACpP,GACf,IAAMkF,EAAWlF,EAAMqC,QAAQiD,SAASxB,MAAMqB,OAAO,GAAG,GACxD,OAAID,EACyB,SAAlBA,EAAS7D,KAAkB6D,EAASE,OAASF,EAAS1D,QAE1D,IAGL6N,GAAkB,SAAC3K,GACrB,OAAQA,GACJ,IAAK,WACD,OAAO,cAAC,GAAD,IACX,IAAK,SACD,OAAO,cAAC,GAAD,IACX,IAAK,WACD,OAAO,cAAC,GAAD,MA0BJ4K,GAtBc,WACzBJ,GAAY,eACZ,IAAMvK,EAAiBP,KACjBM,EAAY3E,aAAY,SAACC,GAAD,OAAsBA,EAAMC,SAASU,kBAAkB+D,aAHtD,EAInB5H,cAALC,EAJwB,sBAKOgD,aAAY,SAACC,GAAD,MAAsB,CAACA,EAAMqC,QAAQC,aAAc8M,GAAUpP,OALhF,mBAKxBsC,EALwB,KAKViN,EALU,KAe/B,OATAxB,GAAkByB,crCjBX,CACHnO,KAAM,wBqCiBV0M,GAAkB0B,erCDX,CACHpO,KAAM,yBqCCV0M,GAAkB2B,erCIX,CACHrO,KAAM,0BqCJV0M,GAAkB4B,YAAU,CrCpBrB,CACHtO,KAAM,uBAgBH,CACHA,KAAM,wBAKH,CACHA,KAAM,2BqCHVmC,aAAWoM,uBAAoB,WAC3BC,UAAUC,UAAUC,UAApB,UAAiChT,EAAE,gBAAnC,aAAuDuF,EAAvD,aAAwEvF,EAAE,iBAA1E,aAA+FwS,IAAiBzT,MAAMC,QAAQmP,SAC/H/H,GAAe,CAACb,EAAciN,IACjC5K,EAAe,YAAaD,GAGxB,mCACK2K,GAAgB3K,M,mfC/C7B,IAAMtH,GAAYlB,IAAOuL,GAAV,MAMTM,GAAQ7L,IAAOqI,MAAV,MAILyL,GAAS9T,IAAO0J,OAAV,MACK,SAAAxJ,GAAK,OAAIA,EAAMkB,MAAMsD,SAASP,KA2ChC4P,GAnBuB,SAAC,GAAqC,IAApC1L,EAAmC,EAAnCA,MAAO8G,EAA4B,EAA5BA,QAASxJ,EAAmB,EAAnBA,MAAOqO,EAAY,EAAZA,OAAY,EAC3DpT,cAALC,EADgE,oBAOvE,OACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAOoP,GAAI5H,EAAX,SAAmBxH,EAAEwH,KACrB,cAACyL,GAAD,CAAQnO,MAAOA,EAAOiB,SAPR,SAACC,GACnBmN,EAAOnN,EAAMC,OAAOnB,QAM+BsO,kBAAiB5L,EAAhE,SACK8G,EAAQ5M,KAAI,SAAC2R,EAAQzR,GAAT,OACT,wBAAQkD,MAAOuO,EAAOvO,MAAtB,SAA0CuO,EAAO7L,OAAf5F,Y,0VCzCtD,IAAMvB,GAAYlB,IAAO2I,IAAV,MAOTwL,GAAenU,YAAO8J,GAAP9J,CAAH,MAkJHoU,GAvIY,WACvBpB,GAAY,aACZ,IAAMjP,EAAWF,aAAY,SAACC,GAAD,OAAsBA,EAAMC,YACnDkC,EAAWC,cAHY,EAIjBtF,cAALC,EAJsB,oBAMvBwT,EAAkB,CAAC,CAAChM,MAAO,KAAM1C,MAAO,MAAO,CAAC0C,MAAO,KAAM1C,MAAO,OACpE2O,EAA0B,UAAOD,EAAP,CAAwB,CAAChM,MAAOxH,EAAE,kBAAmB8E,MAAO,aACtF4O,EAAgB,CAAC,CAAClM,MAAOxH,EAAE,iBAAkB8E,OAAO,GAAO,CAAC0C,MAAOxH,EAAE,kBAAmB8E,OAAO,IAC/F6O,EAAkB,CACpB,CAACnM,MAAOxH,EAAE,gBAAiB8E,MAAO,SAClC,CAAC0C,MAAOxH,EAAE,iBAAkB8E,MAAO,UACnC,CAAC0C,MAAOxH,EAAE,gBAAiB8E,MAAO,UAEhC8O,EAAmB,CACrB,CAACpM,MAAOxH,EAAE,8BAA+B8E,MAAO,UAChD,CAAC0C,MAAOxH,EAAE,gCAAiC8E,MAAO,YAClD,CAAC0C,MAAOxH,EAAE,gCAAiC8E,MAAO,aAGhD+O,EAAiB,SAACC,GACpB1O,EAAS,CACLd,KAAM,eACNC,QAAQ,uCACDrB,GAAa4Q,GADb,IAEHlQ,kBAAkB,2BAAKV,EAASU,mBAAsBkQ,EAAgBlQ,mBACtE8B,aAAa,2BAAKxC,EAASwC,cAAiBoO,EAAgBpO,mBAKlEqO,EAA0B,SAACC,GAC7BH,EAAe,CAACjQ,kBAAmBoQ,KAGvC,OACI,eAAC,GAAD,WACI,eAACV,GAAD,WACI,6BAAKtT,EAAE,mCACP,+BACI,cAAC,GAAD,CACIwH,MAAM,oBACN8G,QAASkF,EACT1O,MAAO5B,EAASU,kBAAkBc,SAClCyO,OAAQ,SAAArO,GAAK,OAAIiP,EAAwB,CAACrP,SAAWI,OAEzD,cAAC,GAAD,CACI0C,MAAM,sBACN8G,QAASsF,EACT9O,MAAO5B,EAASU,kBAAkB+D,UAClCwL,OAAQ,SAAArO,GAAK,OAAIiP,EAAwB,CAACpM,UAAW7C,OAEzD,cAAC,GAAD,CACI0C,MAAM,wCACN8G,QAASoF,EACT5O,MAAO5B,EAASU,kBAAkBqQ,yBAClCd,OAAQ,SAAArO,GAAK,OAAIiP,EAAwB,CAACE,yBAAoC,SAAVnP,OAGxE,6BAAK9E,EAAE,6CACP,cAAC,GAAD,CACIwH,MAAM,6BACN8G,QAASoF,EACT5O,MAAO5B,EAASU,kBAAkBkG,gBAClCqJ,OAAQ,SAAArO,GAAK,OAAIiP,EAAwB,CAACjK,gBAA2B,SAAVhF,OAE/D,cAAC,GAAD,CACI0C,MAAM,sCACN8G,QAASoF,EACT5O,MAAO5B,EAASU,kBAAkBiG,uBAClCsJ,OAAQ,SAAArO,GAAK,OAAIiP,EAAwB,CAAClK,uBAAkC,SAAV/E,OAEtE,cAAC,GAAD,CACI0C,MAAM,6BACN8G,QAASmF,EACT3O,MAAO5B,EAASU,kBAAkBmG,gBAClCoJ,OAAQ,SAAArO,GAAK,OAAIiP,EAAwB,CAAChK,gBAAiBjF,OAG/D,6BAAK9E,EAAE,oCACP,cAAC,GAAD,CACIwH,MAAM,iBACN8G,QAASnL,EAAOzB,KAAI,SAAAnB,GAAU,MAAO,CAACiH,MAAOjH,EAAM2T,cAAepP,MAAOvE,MACzEuE,MAAO5B,EAASU,kBAAkBrD,MAClC4S,OAAQ,SAAArO,GAAK,OAAIiP,EAAwB,CAACxT,MAAOuE,OAErD,cAAC,GAAD,CACI0C,MAAM,qBACN8G,QAASqF,EACT7O,MAAO5B,EAASU,kBAAkBC,SAClCsP,OAAQ,SAAArO,GAAK,OAAIiP,EAAwB,CAAClQ,SAAUiB,OAExD,cAAC,GAAD,CACI0C,MAAM,iCACN8G,QAASoF,EACT5O,MAAO5B,EAASU,kBAAkBE,oBAClCqP,OAAQ,SAAArO,GAAK,OAAIiP,EAAwB,CAACjQ,oBAA+B,SAAVgB,aAI3E,eAACwO,GAAD,WACI,6BAAKtT,EAAE,oCACP,+BACI,cAAC,GAAD,CACIwH,MAAM,sCACN8G,QAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAAI5M,KAAI,SAAAyS,GAAM,MAAO,CAC1E3M,MAAM,GAAD,OAAK2M,GACVrP,MAAOqP,MAEXrP,MAAO5B,EAASwC,aAAaf,kBAC7BwO,OAAQ,SAAArO,GAAK,OAAI+O,EAAe,CAACnO,aAAc,CAACf,kBAAmBG,QAEvE,cAAC,GAAD,CACI0C,MAAM,yBACN8G,QAASmF,EACT3O,MAAO5B,EAASwC,aAAaC,aAC7BwN,OAAQ,SAAArO,GAAK,OAAI+O,EAAe,CAACnO,aAAc,CAACC,aAAcb,cAI1E,eAACwO,GAAD,WACI,6BAAKtT,EAAE,8BACP,6BACI,cAAC,GAAD,CACIwH,MAAM,yBACN8G,QAASoF,EACT5O,MAAO5B,EAASuE,aAChB0L,OAAQ,SAAArO,GAAK,OAAI+O,EAAe,CAACpM,aAAwB,SAAV3C,gB,6SCpJvE,IAAMsP,GAAWjV,IAAOkV,GAAV,MAGR,SAAAhV,GAAK,OAAIA,EAAMqK,SAAN,kEAEN,QAGH4K,GAAcnV,IAAOoV,GAAV,MAiDFC,GAlCqB,SAAC,GAA0D,IAAzDC,EAAwD,EAAxDA,SAAUjG,EAA8C,EAA9CA,YAAa5E,EAAiC,EAAjCA,YAAa8K,EAAoB,EAApBA,eAChET,EAA2BjR,aAAY,SAACC,GAAD,OAAsBA,EAAMC,SAASU,kBAAkBqQ,4BAC9F7O,EAAWC,cACX0K,EAAUC,cACVtG,EAAWE,GAAeqK,EAS1BU,EAAQ,GACV/K,GAAa+K,EAAM1E,KAAK,UACxByE,GAAgBC,EAAM1E,KAAK,QAC/B,IAAMpK,EAAO8O,EAAM7H,KAAK,KAExB,OACI,qCACI,cAACsH,GAAD,yBACIvM,QAfY,WAChB6B,IACAtE,EAASf,EAAmBoQ,IAC5B1E,EAAQE,KAAK,OAaTvG,SAAUA,GACL7D,EAAK3B,OAAS,EAAI,CAAC2B,KAAMA,GAAQ,IAH1C,aAKK4O,KAEL,cAACH,GAAD,UACK9F,EAAY5B,MAAM,QAAQlL,KAAI,SAAAkT,GAAI,OAAI,+BAAOA,aC1DjDC,GAAe,SAACC,GAAD,OAAiBA,EAAIC,QAAQ,sBAAuB,SACnEC,GAAmB,SAACF,GAAD,OAAiBA,EAAIC,QAAQ,UAAU,SAAAE,GAAM,iBAAQA,EAAOC,mB,yQCO5F,IAAM7U,GAAYlB,YAAO8J,GAAP9J,CAAH,MA2DAgW,GApCyB,SAAC,GAOO,IANH/T,EAME,EANFA,MACAsD,EAKE,EALFA,SACArD,EAIE,EAJFA,MACAqB,EAGE,EAHFA,OACAkH,EAEE,EAFFA,YACA8K,EACE,EADFA,eACE,EAC/B3U,cAALC,EADoC,oBAGrCoV,EAAiB,SAACzT,GAAD,OAAeA,EAAK8S,SAAS/P,GAAU2Q,MAAMR,GAAanS,KAC1Ef,EAAK6M,YAAY9J,GAAU2Q,MAAMR,GAAanS,KAErD,OAA4C,IAAxCrB,EAAMqB,OAAO0S,GAAgBlR,OACtB,KAGP,eAAC,GAAD,WACI,6BAAKlE,EAAEoB,KACP,6BAEQC,EAAMqB,OAAO0S,GAAgB1T,KAAI,SAACC,EAAWwE,GAAZ,OAC7B,cAAC,GAAD,CAEIyD,cAAeA,EACf8K,iBAAkBA,EAClBD,SAAU9S,EAAK8S,SAAS/P,GACxB8J,YAAa7M,EAAK6M,YAAY9J,IAJzByB,Y,0GCvCjC,IAAM9F,GAAYlB,IAAO2I,IAAV,MAQTwN,GAAmB,SAAnBA,IAAsG,IAAlFjU,EAAiF,uDAApDkU,GAASvV,EAA2C,uCAAjBwV,EAAiB,uDAAP,GAC5FC,EAAyF,GAiB7F,OAhBAC,OAAOD,QAAQpU,GAAO2M,SAAQ,YAAmB,IAAD,mBAAhB7H,EAAgB,KAAXrB,EAAW,KAC5C,GAAqB,kBAAVA,EAAoB,CAC3B,IAAM2P,EAAW3P,EAAM6Q,WAAW,IAAK,OAAOzB,cACxC1F,EAAcxO,EAAE,UAAD,OAAWwV,EAAUA,EAAU,IAAM,GAArC,kBAAiDR,GAAiB7O,KACvFsP,EAAQxF,KAAK,CACTwE,SAAU,CAACpW,GAAIoW,EAAUtW,GAAIsW,GAC7BjG,YAAa,CAACnQ,GAAImQ,EAAarQ,GAAIqQ,SAEpC,IAAqB,kBAAV1J,EAId,YADA9F,QAAQmP,MAAM,+BAFdsH,EAAUA,EAAQG,OAAON,EAAiBxQ,EAAO9E,EAAGmG,QAOrDsP,GAkDII,GA/CU,WACrB1D,GAAY,WADe,MAECvS,mBAAS,IAFV,mBAEpB8C,EAFoB,KAEZoT,EAFY,KAGrBpR,EAAW1B,aAAY,SAACC,GAAD,OAAsBA,EAAMC,SAASU,kBAAkBc,YAC9EqR,EAAYtN,iBAAyB,MAJhB,EAKf1I,cAALC,EALoB,oBAMrBgW,EAAqBV,QAAiBW,EAAWjW,GAGvD,OAFA6G,GAAakP,GAAW,SAAApN,GAAC,OAAIA,EAAE/B,QAAQgC,WAGnC,eAAC,GAAD,WACI,cAAC,EAAD,CACItE,KAAK,OACLuB,KAAK,SACLpE,aAAYzB,EAAE,uBACdiM,MAAO,CAACiK,aAAc,QACtBpQ,YAAa9F,EAAE,iBACf8E,MAAOpC,EACPkD,IAAKmQ,EACLhQ,SAAU,SAACC,GAAD,OAAgD8P,EAAU9P,EAAMC,OAAOnB,UAErF,cAAC,GAAD,CACI1D,MAAM,iBACNsD,SAAUA,EACVrD,MAAO2U,EACPtT,OAAQA,IAEZ,cAAC,GAAD,CACItB,MAAM,mBACNsD,SAAUA,EACVrD,MAAO8U,KAAGN,OAAOO,UACjB1T,OAAQA,EACRkH,aAAa,EACb8K,gBAAgB,IAEpB,cAAC,GAAD,CACItT,MAAM,mBACNsD,SAAUA,EACVrD,MAAO8U,KAAGN,OAAOQ,UACjB3T,OAAQA,EACRkH,aAAa,EACb8K,gBAAgB,Q,scClFhC,IAAM4B,GAAOnX,IAAO+B,GAAV,MA0BJqV,GAAOpX,IAAOuL,GAAV,MAOJ8L,GAAwC,SAAC,GAAY,IAAX7U,EAAU,EAAVA,KACtC8U,EAAY9U,EAAK,GACjB+U,EAAa/U,EAAK,GACxB,OACI,eAAC4U,GAAD,WACI,cAAC,GAAD,CAAiBzR,MAAO2R,EAAWE,MAAM,UACzC,cAAC,GAAD,CAAiB7R,MAAO4R,EAAYC,MAAM,aAKhDC,GAAUzX,IAAO2I,IAAV,MAGM,SAAAzI,GAAK,MAAoB,SAAhBA,EAAMsX,MAAmB,aAAe,cAG9DE,GAAyE,SAAC,GAAoB,IAAnB/R,EAAkB,EAAlBA,MAAO6R,EAAW,EAAXA,MAC9EG,EAAyB,kBAAVhS,EAAqB,CAACA,GAASA,EACpD,OACI,cAAC8R,GAAD,CAASD,MAAOA,EAAhB,SACKG,EAAMpV,KAAI,SAACkT,EAAMhT,GAAP,OACP,+BAAmBgT,GAARhT,SAMZmV,GA/CqC,SAAC,GAAa,IAAZ1V,EAAW,EAAXA,MAClD,OACI,cAACiV,GAAD,UAEQjV,EAAMK,KAAI,SAAAC,GAAI,OACV,cAAC,GAAD,CAAUA,KAAMA,U,uMCbpC,IAAMtB,GAAYlB,IAAO2I,IAAV,MAIT8O,GAAUzX,IAAO2I,IAAV,MA0DEkP,GArDS,WACpB7E,GAAY,UADc,MAEdpS,cAALC,EAFmB,oBAI1B,OACI,eAAC,GAAD,WACI,eAAC,GAAD,WACI,6BAAKA,EAAE,mBACP,cAAC,GAAD,CACIqB,MAAO,CACH,CAACrB,EAAE,iBAAkBiX,MACrB,CAACjX,EAAE,gBAAiB,CAACkX,KAAO1X,KAAM0X,KAAOC,QACzC,CAACnX,EAAE,sBAAuBoX,KAAa1V,KAAI,SAAA2V,GAAC,OAAIA,EAAE7X,SAClD,CAACQ,EAAE,iBAAkBsX,SAG7B,eAAC,GAAD,WACKtX,EAAE,6BACH,+BACI,6BACI,cAAC,IAAD,CAAMG,GAAG,kBAAT,8BAEJ,6BACI,cAAC,IAAD,CAAMA,GAAG,iBAAT,6BAEJ,6BACI,cAAC,IAAD,CAAMA,GAAG,oBAAT,yCAKhB,eAAC,GAAD,CAAM8L,MAAO,CAACsL,UAAW,QAAzB,UACI,6BAAKvX,EAAE,wBACP,cAAC,GAAD,CACIqB,MACIqU,OAAOD,QAAQ+B,MAAc9V,KAAI,SAAA+V,GAAG,MAAI,CACpCA,EAAI,GACiB,MAArBA,EAAI,GAAGC,OAAO,GACRD,EAAI,GAAGE,UAAU,GACjBF,EAAI,SAItB,cAAC,GAAD,CACIG,wBAAyB,CACrBC,OAAQ7X,EAAE,kBAAmB,CAAC8X,IAAK,yBAA0BtQ,MAAO,wBC1D/EuQ,GAAS,CAClB,CAACvY,KAAM,oBAAqBC,KAAM,IAAKuY,OAAQ,kBAAM,cAAC,GAAD,MACrD,CAACxY,KAAM,kBAAmBC,KAAM,YAAauY,OAAQ,kBAAM,cAAC,GAAD,MAC3D,CAACxY,KAAM,gBAAiBC,KAAM,UAAWuY,OAAQ,kBAAM,cAAC,GAAD,MACvD,CAACxY,KAAM,eAAgBC,KAAM,SAAUuY,OAAQ,kBAAM,cAAC,GAAD,OAG5CC,GAAc,CACvB7W,MAAM,gBACNC,MAAO0W,GAAOrW,KAAI,SAAAwW,GACd,MAAO,CAAC1Y,KAAM0Y,EAAK1Y,KAAMC,KAAMyY,EAAKzY,U,8RCV5C,IAAMyQ,GAAU/Q,IAAO2I,IAAV,MAOPzH,GAAYlB,YAAO8J,GAAP9J,CAAH,MA2JAgZ,GAnJiB,WAG5B,OAFAhG,GAAY,mBAGR,cAAC,GAAD,UACI,eAAC,GAAD,WACI,kEAEA,oSAIA,sJAGA,sXAG4C,mBAAGiG,KAAK,0CAAR,sCAH5C,YAIqC,mBAAGA,KAAK,sCAAR,2CAJrC,OAOA,yCAEA,uHAEA,wDAEA,iOAEA,iRAGA,qMAGA,6DAEA,iGAEA,+BACI,2EACA,6EACA,+EACA,6FACA,4PAIA,iDACA,2DAGJ,2CAEA,kpBAQA,yDAEA,8XAKA,sFAAwD,mBACpDA,KAAK,kDAD+C,oDAAxD,OAKA,uEAEA,4IAGA,ifAMA,iJAGA,8DAEA,8UAKA,uPAIA,2FAEA,4GACA,6MAEA,mIAEA,sIAEA,kKAGA,6DAEA,+JAEA,uKAEA,0PAGA,sJAEA,uLAEA,yKAEA,2NAEA,kKAGA,wDAEA,wOAIA,iX,wOCzJhB,IAAMlI,GAAU/Q,IAAO2I,IAAV,MAIPzH,GAAYlB,YAAO8J,GAAP9J,CAAH,MAqFAkZ,GA7EgB,WAG3B,OAFAlG,GAAY,kBAGR,cAAC,GAAD,UACI,eAAC,GAAD,WACI,iEAEA,qIAEA,4BAAG,wDAEH,udAEA,sFAAwD,mBAAGiG,KAAK,kDAAR,gCAAxD,qEAA0M,mBAAGA,KAAK,yCAAR,0CAA1M,OAEA,4BAAG,0DAEH,8ZAEA,4BAAG,yDAEH,2eAA6c,mBAAGA,KAAK,iEAAR,qEAA7c,OACA,4BAAG,0DAEH,+BAEA,+BACI,wDACA,6TAGJ,+BACI,sDACA,6UAOJ,+BACI,yDACA,uWAKJ,4BAAG,2DAEH,4MAEA,6BAEA,+BACI,iYACA,+HAKJ,4BAAG,wDAEH,kSAEA,4JAEA,6BACA,uE,srBC7EhB,IAAM/X,GAAYlB,YAAO8J,GAAP9J,CAAH,MAIA,SAAAE,GAAK,OAAIA,EAAMkB,MAAMsD,SAASN,KAGvC+U,GAAOnZ,IAAO6B,KAAV,MASJsL,GAASnN,IAAOoN,OAAV,MAKU,SAAAlN,GAAK,OAAIA,EAAMkB,MAAM4B,KAAKH,SAKxB,SAAA3C,GAAK,OAAIA,EAAMkB,MAAM+B,YAAYJ,wBAInDqW,GAAkBpZ,IAAO2I,IAAV,MAkCN0Q,GA9BgB,WAC3B,IAAMpT,EAAWC,cACXnC,EAAWH,IAEjB,GAAIG,EAASuV,4BACT,OAAO,KAUX,OACI,eAAC,GAAD,WACI,eAAC,GAAD,uFAEQ,cAAC,IAAD,CAAMtY,GAAG,iBAAT,2BAFR,KAGM,cAAC,IAAD,CAAMA,GAAG,kBAAT,4BAHN,aAIc,cAAC,IAAD,CAAMA,GAAG,oBAAT,8BAJd,OAMA,cAACoY,GAAD,UACI,cAAC,GAAD,CAAQ1Q,QAjBL,WACXzC,EChDmB,SAAClC,GACxB,MAAO,CACHoB,KAAM,eACNC,QAASrB,GD6CAwV,CAAY,2BACdxV,GADa,IAEhBuV,6BAA6B,EAC7BhR,cAAc,OAaV,sB,8RE7DhB,IAAMyI,GAAU/Q,IAAO2I,IAAV,MAOPzH,GAAYlB,YAAO8J,GAAP9J,CAAH,MAkEAwZ,GA1DkB,WAG7B,OAFAxG,GAAY,qBAGR,cAAC,GAAD,UACI,eAAC,GAAD,WACI,qEAEA,0CAEA,icAEA,gDAEA,sRAEA,+BACI,+DACA,yGACA,gHACA,4GACA,gIAGJ,iWAAmU,mBAAGiG,KAAK,0CAAR,wCAAnU,YAA4Z,mBAAGA,KAAK,wCAAR,sCAA5Z,OAEA,+CAEA,+aAEA,gDAEA,yfAEA,yDAEA,maAEA,0CAEA,uTAEA,oEAEA,+OAEA,iDAEA,gEAEA,kDAEA,0K,UCtED,O,QAAIQ,GCAbC,GAAiB,CACnBvU,KAAM,SACNwU,SAAU,CAAC,QAAS,SACpBC,WAAY,CACR3X,MAAO,CAACkD,KAAM,UACdyC,MAAO,CACHzC,KAAM,QACNjD,MAAO,CACH2X,MAAO,CACH,CACI1U,KAAM,SACNyU,WAAY,CACRzU,KAAM,CAAC2U,KAAM,CAAC,SACdhL,KAAM,CAAC3J,KAAM,UACbF,MAAO,CAACE,KAAM,UACd+D,OAAQ,CAAC/D,KAAM,YAGvB,CACIA,KAAM,SACNyU,WAAY,CACRzU,KAAM,CAAC2U,KAAM,CAAC,SACdhL,KAAM,CAAC3J,KAAM,UACbG,QAAS,CAACH,KAAM,iBAU7B4U,GADU,SAACC,GAAD,OAAmBC,GAAUC,SAASR,GAAgBM,I,4SCvB/E,IAAM9Y,GAAYlB,IAAO2I,IAAV,MAOTwR,GAAana,YAAO8J,GAAP9J,CAAH,MAuDDoa,GAvCgC,SAAC,GAAa,IAAZlE,EAAW,EAAXA,MAAW,EAC1BzV,oBAAS,GADiB,mBACjD4Z,EADiD,KACxCC,EADwC,OAE5B7Z,oBAAS,GAFmB,mBAEjD8Z,EAFiD,KAEzCC,EAFyC,OAG5C5Z,cAALC,EAHiD,oBAIlD+P,EAAUC,cACV7C,EAAeH,KAmBrB,OAlBA/M,qBAAU,WACDuZ,GAAYE,GACb3J,EAAQE,KAAK,OAClB,CAACuJ,EAASE,IACbzZ,qBAAU,WACNkP,GAASkG,EAAMuE,OAAOxK,IACjBI,MAAK,SAAAqK,GACYX,GAAiBW,GAE3B1M,EAAa0M,GAEbF,GAAU,GAEdF,GAAW,MAEd1a,MAAMC,QAAQmP,SACpB,IAGC,cAAC,GAAD,UACI,cAACmL,GAAD,UAEQE,EACM,8BAAIxZ,EAAE,6BAAN,IAAqCqV,EAAMuE,OAAOxK,MAClDsK,EACI,4BAAI1Z,EAAE,6BACN,4BAAIA,EAAE,8B,+hBC3DpC,IAAMK,GAAYlB,IAAO2I,IAAV,MAOTwR,GAAana,YAAO8J,GAAP9J,CAAH,MASVmN,GAASnN,IAAOoN,OAAV,MAGU,SAAAlN,GAAK,OAAIA,EAAMkB,MAAM4B,KAAKH,SAKxB,SAAA3C,GAAK,OAAIA,EAAMkB,MAAM+B,YAAYJ,wBAiC1C4X,GAvB8B,SAAC,GAAa,IAAZzE,EAAW,EAAXA,MACrCtF,EAAUC,cAEV+J,EAAS,UADF,0CACE,gCAAkC1E,EAAMuE,OAAOxK,IAHR,EAI1CrP,cAALC,EAJ+C,oBAUtD,OACI,cAAC,GAAD,UACI,eAAC,GAAD,WACI,gCACI,cAAC,GAAD,CAAQ6H,QARR,WACZiL,UAAUC,UAAUC,UAAU+G,GAAWhb,MAAMC,QAAQmP,QAO3C,SAA2BnO,EAAE,iBAC7B,cAAC,GAAD,CAAQ6H,QAASkI,EAAQiK,OAAzB,SAAkCha,EAAE,oBAExC,mBAAGoY,KAAM2B,EAAT,SAAqBA,U,6GC1CrC,IAAMnD,GAAUzX,IAAO6S,KAAV,MAmCEiI,GA9BO,WAClB,IAAM1Z,EAAQoD,IAEd,OACI,eAAC,IAAD,CAAepD,MAAOA,EAAtB,UACI,cAAC,EAAD,IACA,qCACI,cAAC,EAAD,eAAY0X,KACZ,cAAC,GAAD,UACI,eAAC,IAAD,WACKF,GAAOrW,KAAI,SAACwY,EAAO1P,GAAR,OACR,cAAC,IAAD,CAEI2P,OAAK,EAAC1a,KAAMya,EAAMza,KAClBuY,OAAQkC,EAAMlC,QAFTxN,MAKb,cAAC,IAAD,CAAO2P,OAAK,EAAC1a,KAAK,kBAAkB2a,UAAWjC,KAC/C,cAAC,IAAD,CAAOgC,OAAK,EAAC1a,KAAK,iBAAiB2a,UAAW/B,KAC9C,cAAC,IAAD,CAAO8B,OAAK,EAAC1a,KAAK,oBAAoB2a,UAAWzB,KACjD,cAAC,IAAD,CAAOwB,OAAK,EAAC1a,KAAK,yBAAyB2a,UAAWb,KACtD,cAAC,IAAD,CAAOY,OAAK,EAAC1a,KAAK,uBAAuB2a,UAAWN,UAG5D,cAAC,GAAD,W,SC1CVO,GAA4B,CAC9BjL,G,OAAIkL,EACJ7S,cAAc,EACdgR,6BAA6B,EAC7B/S,aAAc,CACVC,aAAc,UACdhB,kBAAmB,GAEvBf,kBAAmB,CACfmG,gBAAiB,UACjBrF,SAAU,KACViD,UAAW,SACX7D,qBAAqB,EACrBmQ,0BAA0B,EAC1BpK,wBAAwB,EACxBC,iBAAiB,EACjBvJ,MAAO,QACPsD,SAAU,WAIZ0W,GAA0B,WAsBnBC,GAAe,SAACtX,GAGzB,OAFAuX,aAAaC,WAAWH,IACxBE,aAAaE,QAAQJ,GAAyB1M,KAAKQ,UAAUnL,IACtDA,GC7CL0X,GDsBsB,WACxB,IAAMC,EAAeJ,aAAaK,QAAQP,IACpCrX,OAA4B+S,IAAjB4E,GAA+C,OAAjBA,EACzChN,KAAKC,MAAM+M,GACX,GAEA5X,EAAK,uCACJoX,IACAnX,GAFI,IAGPU,kBAAkB,2BAAKyW,GAAgBzW,mBAAsBV,EAASU,mBACtE8B,aAAa,2BAAK2U,GAAgB3U,cAAiBxC,EAASwC,cAC5D0J,GAAIiL,GAAgBjL,KAMxB,OAHIlM,EAASkM,IAAMiL,GAAgBjL,IAC/BoL,GAAavX,GAEVA,ECvCU8X,GA6BNC,GA1BS,SAAlBA,IAA+E,IAA5D/X,EAA2D,uDAAnD2X,GAAcrT,EAAqC,uCAChF,OAAQA,EAAOjD,MACX,IAAK,eAID,OAFAiE,SAAS0S,qBAAqB,QAAQtZ,KAAK,GAAGsI,KAAO1C,EAAOhD,QAAQX,kBAAkBc,SACtFpG,EAAK4c,eAAe3T,EAAOhD,QAAQX,kBAAkBc,UAAU3F,MAAMC,QAAQmP,OACtEqM,GAAajT,EAAOhD,SAE/B,IAAK,yBACD,OAAOyW,EAAgB/X,EAAO,CAC1BqB,KAAM,eACNC,QAAQ,2BAAKtB,GAAN,IAAaW,kBAAmB2D,EAAOhD,YAGtD,IAAK,oBACD,OAAOyW,EAAgB/X,EAAO,CAC1BqB,KAAM,eACNC,QAAQ,2BAAKtB,GAAN,IAAayC,aAAc6B,EAAOhD,YAGjD,QAEI,OADAjG,EAAK4c,eAAejY,EAAMW,kBAAkBc,UAAU3F,MAAMC,QAAQmP,OAC7DlL,I,UCrBbkY,GAAS,IAAIC,KAAYC,OAAO,MAChCC,GAAwB,CAC1B/V,aAAc,GACdiG,cAAe,EACfD,UAAU,EACVhD,SAAU,CACNnH,MAAO,GACP2F,MAAO,KAITwU,GAAgB,SAACnX,EAAe6F,EAAgBuR,GAClD,GAAIpX,EAAMF,OAAS,EAAG,CAClBiX,GAAOM,SAASrX,EAAO6F,EAAMyR,SAASF,EAAY,KAClD,IAAMnT,EAAS8S,GAAOQ,WAAWvT,OAAO,GAAG,GAAGC,OAC9C,OAAOA,GAAkB,GAE7B,MAAO,IAGLuT,GAAa,WACfT,GAAOU,kBAuIIC,GApIQC,yBAAsCT,GAAc,CACvEU,qBAAsB,SAAC/Y,EAAOsE,GAAR,mBAAC,eAAuBtE,GAAxB,IAA+BsC,aAAcgC,EAAOhD,WAE1E0X,oBAAqB,SAAChZ,GAAD,mBAAC,eAAeA,GAAhB,IAAuBsC,aAAc,MAE1D2W,qBAAsB,SAACjZ,GAAD,mBAAC,eAAeA,GAAhB,IAAuBsF,SAAU+S,GAAa/S,YAEpE4T,sBAAuB,SAAClZ,GAEpB,OADA2Y,KACO3Y,GAGXmZ,eAAgB,SAACnZ,EAAOsE,GACpB,GAAIA,EAAOhD,QAAQE,QAAQP,OAAS,EAAG,CACnC,IAAMmY,EAAS,eAAOpZ,GAOtB,OANAoZ,EAAU9T,SAASxB,MAAQsV,EAAU9T,SAASxB,MAAM6O,OAAO,CAAC,CACxDtR,KAAM,OACN2J,KAAMA,eACN7J,MAAOmD,EAAOhD,QAAQE,QACtB4D,OAAQkT,GAAchU,EAAOhD,QAAQE,QAAS8C,EAAOhD,QAAQG,SAAU6C,EAAOhD,QAAQI,sBAEnF0X,EAEX,OAAO,2BACApZ,GADP,IACcsF,SAAS,2BACZtF,EAAMsF,UADK,IACKxB,MAAO9D,EAAMsF,SAASxB,MAAM6O,OAAO,CAAC,CACnDtR,KAAM,OACN2J,KAAMA,eACN7J,MAAO,GACPiE,OAAQ,WAMxBiU,eAAgB,SAACrZ,EAAOsE,GACpB,IAAM8U,EAAS,eAAOpZ,GAMtB,OALAoZ,EAAU9T,SAASxB,MAAQsV,EAAU9T,SAASxB,MAAM6O,OAAO,CAAC,CACxDtR,KAAM,OACN2J,KAAMA,eACNxJ,QAAS8C,EAAOhD,WAEb8X,GAGXE,iBAAkB,SAACtZ,EAAOsE,GAEtB,GADqBtE,EAAMsF,SAASxB,MAAMQ,EAAOhD,QAAQ3C,OACvC,CACd,IAAM4a,EAAwB,CAC1BlY,KAAM,OACN2J,KAAMhL,EAAMsF,SAASxB,MAAMQ,EAAOhD,QAAQ3C,OAAOqM,KACjD7J,MAAOmD,EAAOhD,QAAQH,MACtBiE,OAAQkT,GACJhU,EAAOhD,QAAQH,MACfmD,EAAOhD,QAAQG,SACf6C,EAAOhD,QAAQI,oBAGjB0X,EAAS,eAAOpZ,GAOtB,OANIsE,EAAOhD,QAAQH,MAAMF,OAAS,EAC9BmY,EAAU9T,SAASxB,MAAMQ,EAAOhD,QAAQ3C,OAAS4a,EAEjDH,EAAU9T,SAASxB,MAAQsV,EAAU9T,SAASxB,MACzCrE,QAAO,SAAC+Z,EAAGjS,GAAJ,OAAUA,IAAMjD,EAAOhD,QAAQ3C,SAExCya,EAEX,OAAOpZ,GAGXyZ,YAAa,SAACzZ,EAAOsE,GAAR,mBAAC,eAAuBtE,GAAxB,IAA+BuI,aAAcjE,EAAOhD,WAEjEoY,cAAe,SAAC1Z,EAAOsE,GACnB,IAAM8U,EAAS,eAAOpZ,GAEtB,OADAoZ,EAAU9Q,SAAWhE,EAAOhD,QACrB8X,GAGXO,iBAAkB,SAAC3Z,EAAOsE,GACtB,IAAM8U,EAAS,eAAOpZ,GAWtB,OAVIsE,EAAOhD,QAAQE,QAAQP,OAAS,EAChCmY,EAAU9T,SAASxB,MAAMQ,EAAOhD,QAAQ3C,OAAS,CAC7C0C,KAAM,OACN2J,KAAMhL,EAAMsF,SAASxB,MAAMQ,EAAOhD,QAAQ3C,OAAOqM,KACjDxJ,QAAS8C,EAAOhD,QAAQE,SAG5B4X,EAAU9T,SAASxB,MAAQsV,EAAU9T,SAASxB,MACzCrE,QAAO,SAAC+Z,EAAGjS,GAAJ,OAAUA,IAAMjD,EAAOhD,QAAQ3C,SAExCya,GAGXQ,mBAAoB,SAAC5Z,EAAOsE,GACxBqU,KACA,IAAMkB,EAAe7Z,EAAMsF,SAASxB,MAAMrF,KAAI,SAACuF,GAAD,MAAoC,SAAdA,EAAK3C,KACnE,CACEA,KAAM,OACN2J,KAAMhH,EAAKgH,KACX7J,MAAO6C,EAAK7C,MACZiE,OAAQkT,GAActU,EAAK7C,MAAOmD,EAAOhD,QAAQG,SAAU6C,EAAOhD,QAAQI,oBAC1EsC,KACFoV,EAAS,eAAOpZ,GAEtB,OADAoZ,EAAU9T,SAASxB,MAAQ+V,EACpBT,GAGXU,YAAa,SAAC9Z,EAAOsE,GACjB,IAAM8U,EAAS,eAAOpZ,GAEtB,OADAoZ,EAAU9T,SAASxB,MAAQ9D,EAAMsF,SAASxB,MAAMrE,QAAO,SAAC+Z,EAAGjS,GAAJ,OAAUA,IAAMjD,EAAOhD,WACvE8X,GAGXW,cAAe,SAAC/Z,EAAOsE,GACnB,OAAO,2BAAItE,GAAX,IAAkBsF,SAAUhB,EAAOhD,WAGvC0Y,uBAAwB,SAACha,GACrB,OAAO,2BACAA,GADP,IAEIuI,aAAc0R,KAAKC,IAAIla,EAAMuI,aAAe,EAAG,MAIvD4R,yBAA0B,SAACna,GACvB,OAAO,2BACAA,GADP,IAEIuI,aAAc0R,KAAKG,IAAIpa,EAAMuI,aAAe,EAAGvI,EAAMsF,SAASxB,MAAM7C,OAAS,QC3J5EoZ,GAAcC,aAAgB,CACvCra,SAAU8X,GACV1V,QAASwW,KCAP0B,GCHY,kBAAMC,aAAYH,IDGtBI,GAYCC,GAVc,WACzB,OACI,cAAC,IAAD,CAAUH,MAAOA,GAAjB,SACI,cAAC,IAAD,UACI,cAAC,GAAD,SEDVI,GAAcC,QACa,cAA7BvQ,OAAO5N,SAASoe,UAEa,UAA7BxQ,OAAO5N,SAASoe,UAEhBxQ,OAAO5N,SAASoe,SAASzI,MACrB,2DAyCR,SAAS0I,GAAgBC,GACrBlL,UAAUmL,cACLC,SAASF,EAAO,CAACG,MAAO,MACxB3O,MAAK,SAAA4O,GACFA,EAAaC,cAAgB,WACzB,IAAMC,EAAmBF,EAAaG,WAClCD,IACAA,EAAiBE,cAAgB,WACE,cAA3BF,EAAiBrb,QACb6P,UAAUmL,cAAcQ,WAKxBzf,QAAQC,IAAI,6CAKZD,QAAQC,IAAI,6CAOnCF,OAAM,SAAAoP,GACHnP,QAAQmP,MAAM,4CAA6CA,M,qBC7EvEuQ,aAAWC,KAAa,CAEpBC,UAAW,CACPC,oBAAqB,ODUtB,WACH,GAAI,kBAAmB/L,UAAW,CAM9B,GAJkB,IAAIgM,IAClBvd,IACA+L,OAAO5N,SAASU,YAEN2e,SAAWzR,OAAO5N,SAASqf,OAIrC,OAGJzR,OAAO0R,iBAAiB,QAAQ,WAC5B,IAAMhB,EAAK,UAAMzc,IAAN,sBAEPqc,KAmDhB,SAAiCI,GAE7B3O,MAAM2O,GACDxO,MAAK,SAAAC,GAGsB,MAApBA,EAASwP,SACwD,IAAjExP,EAASF,QAAQ2P,IAAI,gBAAiBC,QAAQ,cAG9CrM,UAAUmL,cAAcmB,MAAM5P,MAAK,SAAA4O,GAC/BA,EAAaiB,aAAa7P,MAAK,WAC3BlC,OAAO5N,SAAS4f,eAKxBvB,GAAgBC,MAGvBjf,OAAM,WACHC,QAAQC,IACJ,oEAvEAsgB,CAAwBvB,GAIxBlL,UAAUmL,cAAcmB,MAAM5P,MAAK,WAC/BxQ,QAAQC,IACJ,gHAMR8e,GAAgBC,OCrChCwB,GACAC,IAASzH,OACL,cAAC,GAAD,IACAzP,SAASmX,eAAe,U","file":"static/js/main.18161eb0.chunk.js","sourcesContent":["import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport enLangData from \"./translations/en.json\";\nimport deLangData from \"./translations/de.json\"\n\nconst resources = {\n    en: {translation: enLangData},\n    de: {translation: deLangData}\n};\n\ni18n\n    .use(initReactI18next)\n    .init({\n        resources,\n        lng: \"en\",\n        fallbackLng: \"en\",\n        keySeparator: false,\n        interpolation: {\n            escapeValue: false\n        }\n    }).catch(console.log);\n\n\nexport default i18n;\n","import React, {useEffect, useState} from \"react\";\nimport styled from \"styled-components\";\nimport {Link} from \"react-router-dom\";\nimport {useLocation} from \"react-router-dom\";\nimport {useTranslation} from \"react-i18next\";\n\nconst StyledLink = styled(Link)`\n    padding: 0 20px;\n    color: white;\n    text-decoration: none;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    ${\n        (props: {enabled: string}) => props.enabled === \"true\"\n            ? `border-bottom: 4px solid white; padding-top: 4px;` : null\n    }\n    &:hover {\n        background-color: rgba(255, 255, 255, 0.2);\n    }\n    \n    &:focus {\n        outline: 2px solid white;\n    }\n`;\n\ninterface Props {\n    name: string,\n    path: string\n}\n\nconst NavbarItem: React.FC<Props> = ({name, path}) => {\n    const location = useLocation();\n    const [active, setActive] = useState(false);\n    const [t] = useTranslation();\n    useEffect(() => {\n        setActive(location.pathname === path)\n    }, [location, path]);\n\n    return (\n        <StyledLink\n            to={path}\n            enabled={active.toString()}\n        >{t(name)}</StyledLink>\n    )\n}\n\nexport default NavbarItem","import React from \"react\";\nimport styled from \"styled-components\";\nimport NavbarItem from \"./NavbarItem\";\n\nconst Container = styled.header`\n    display: flex;\n    font-size: 36pt;\n    background-color: ${props => props.theme.navbar.backgroundColor};\n    color: white;\n    height: 100%;\n    align-items: center;\n    box-shadow: 0 5px 5px rgba(0, 0, 0, 0.20);\n    z-index: 1;\n`;\n\nconst Nav = styled.nav`\n    display: flex;\n    height: 100%;\n`;\n\nconst Logo = styled.img`\n    width: ${props => props.theme.navbarHeight};\n    height: ${props => props.theme.navbarHeight};\n    padding: 10px;\n`;\n\nconst Title = styled.span`\n    margin-right: auto;\n    padding: 10px;\n`;\n\nconst UL = styled.ul`\n    display: flex;\n    flex-direction: row;\n    list-style-type: none;\n    height: 100%;\n    margin: 0;\n`;\n\ninterface PropsItem {\n    name: string,\n    path: string\n}\n\ninterface Props {\n    title: string,\n    items: PropsItem[]\n}\n\nconst Navbar: React.FC<Props> = ({title, items}) => {\n\n    return (\n        <Container>\n            <Logo src={process.env.PUBLIC_URL + \"/logo.png\"} alt=\"logo\"/>\n            <Title aria-label=\"Title\">{title}</Title>\n            <Nav aria-label=\"Main Menu\">\n                <UL>\n                    {\n                        items.map((item, index) => (\n                            <li key={index}>\n                                <NavbarItem name={item.name} path={item.path}/>\n                            </li>\n                        ))\n                    }\n                </UL>\n            </Nav>\n        </Container>\n    );\n}\n\nexport default Navbar;","const lightTheme = {\n    app: {\n        backgroundColor: \"white\",\n        backgroundImage: \"/background/light.png\"\n    },\n    navbar: {\n        backgroundColor: \"#1D3971\",\n        color: \"white\"\n    },\n    navbarItem: {\n        hoverBackgroundColor: \"rgba(255, 255, 255, 0.2)\"\n    },\n    card: {\n        backgroundColor: \"white\",\n        color: \"black\"\n    },\n    cardHeading: {\n        backgroundColor: \"rgba(0, 0, 0, 0.08)\"\n    },\n    sidebar: {\n        backgroundColor: \"white\",\n        color: \"black\"\n    },\n    sidebarItem: {\n        hoverBackgroundColor: \"rgba(0, 0, 0, 0.2)\"\n    },\n    inputText: {\n        backgroundColor: \"white\",\n        outline: \"2px solid black\",\n        color: \"black\"\n    },\n    icon: {\n        filter: \"invert(0%)\",\n        borderColor: \"black\"\n    },\n    documentCell: {\n        borderSelectedColor: \"black\",\n        borderColor: \"rgba(0, 0, 0, 0.2)\",\n    },\n};\n\nexport default lightTheme;","const darkTheme = {\n    app: {\n        backgroundColor: \"#171717\",\n        backgroundImage: \"/background/dark.png\"\n    },\n    navbar: {\n        backgroundColor: \"#060606\",\n        color: \"white\"\n    },\n    navbarItem: {\n        hoverBackgroundColor: \"rgba(255, 255, 255, 0.1)\"\n    },\n    card: {\n        backgroundColor: \"#2b2b2b\",\n        color: \"#d6d6d6\"\n    },\n    cardHeading: {\n        backgroundColor: \"rgba(0, 0, 0, 0.08)\"\n    },\n    sidebar: {\n        backgroundColor: \"#2b2b2b\",\n        color: \"white\"\n    },\n    sidebarItem: {\n        hoverBackgroundColor: \"rgba(255, 255, 255, 0.1)\"\n    },\n    inputText: {\n        backgroundColor: \"#2b2b2b\",\n        outline: \"2px solid white\",\n        color: \"white\"\n    },\n    icon: {\n        filter: \"invert(100%)\",\n        borderColor: \"white\"\n    },\n    documentCell: {\n        borderSelectedColor: \"white\",\n        borderColor: \"rgba(255, 255, 255, 0.2)\",\n    },\n};\n\nexport default darkTheme;","import {useSelector} from \"react-redux\";\nimport {RootState} from \"../store\";\nimport {Settings} from \"../store/settings/types\";\n\nconst useSettings = (): Settings => {\n    return useSelector((state: RootState) => state.settings);\n}\n\nexport default useSettings;","import lightTheme from \"../themes/light\";\nimport darkTheme from \"../themes/dark\";\nimport {DefaultTheme} from \"styled-components\";\nimport useSettings from \"./useSettings\";\n\nexport type ThemeName = \"light\" | \"dark\";\nexport const themes = [\"light\", \"dark\"];\n\nconst fontSizes = {\n    large: {\n        l: \"36pt\",\n        m: \"28pt\",\n        s: \"20pt\"\n    },\n    medium: {\n        l: \"28pt\",\n        m: \"22pt\",\n        s: \"18pt\"\n    },\n    small: {\n        l: \"22pt\",\n        m: \"16pt\",\n        s: \"12pt\"\n    }\n};\n\nconst getFontSize = (size: string) => {\n    switch (size) {\n        case \"large\":\n            return fontSizes.large;\n        case \"medium\":\n            return fontSizes.medium;\n        case \"small\":\n            return fontSizes.small;\n        default:\n            return fontSizes.large;\n    }\n}\n\nconst getTheme = (theme: string) => {\n    switch (theme) {\n        case \"light\":\n            return lightTheme;\n        case \"dark\":\n            return darkTheme;\n        default:\n            return lightTheme;\n    }\n}\n\nconst getNavbarHeight = (size: string) => {\n    switch (size) {\n        case \"medium\":\n            return \"65px\";\n        case \"small\":\n            return \"50px\";\n        default:\n            return \"80px\";\n    }\n}\n\nconst useTheme = (): DefaultTheme => {\n    const interfaceSettings = useSettings().interfaceSettings;\n    const theme = interfaceSettings.theme;\n    const fontSize = interfaceSettings.fontSize;\n    const showBackgroundImage = interfaceSettings.showBackgroundImage;\n\n    return {\n        ...getTheme(theme),\n        fontSize: getFontSize(fontSize),\n        navbarHeight: getNavbarHeight(fontSize),\n        showBackgroundImage\n    };\n}\n\nexport default useTheme;","import {createGlobalStyle} from \"styled-components\";\n\nconst GlobalStyle = createGlobalStyle`        \n  body {\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    background-color: ${props => props.theme.app.backgroundColor};\n    background-size: cover;\n    background-repeat: repeat;\n    ${\n            props => props.theme.app.backgroundImage.length > 0 && props.theme.showBackgroundImage\n                    ? `background-image: url(${process.env.PUBLIC_URL + props.theme.app.backgroundImage});` : null\n    }\n  }\n  \n  #root {\n    display: grid;\n    grid-template-rows: ${props => props.theme.navbarHeight} 1fr auto;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n  }\n\n  code {\n    font-family: 'JetBrains Mono', monospace;\n  }\n\n  * {\n    box-sizing: border-box;\n    font-size: ${props => props.theme.fontSize.m};\n    font-family: 'Roboto', sans-serif;\n    font-weight: 300;\n    outline: none;\n  }\n`;\n\nexport default GlobalStyle;","import styled from \"styled-components\";\n\nconst InputText = styled.input`\n    width: 100%;\n    padding: 20px;\n    border: none;\n    box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.1);\n    background-color: ${props => props.theme.inputText.backgroundColor};\n    color: ${props => props.theme.inputText.color};\n    \n    &:focus {\n        outline: ${props => props.theme.inputText.outline};\n    }\n`;\n\nexport default InputText;","import {\n    ChangeCurrentInput,\n    ClearCurrentInput,\n    ClearDocumentCells,\n    ClearMathUserScope, DeleteCell, LoadDocument,\n    PushMathCell,\n    PushTextCell, RefreshMathCells,\n    SelectCell,\n    SetEditCell,\n    UpdateMathCell,\n    UpdateTextCell,\n    Document as DocumentType, MoveCellSelectionUp, MoveCellSelectionDown,\n} from \"./types\";\nimport {Language, SignificantDigits} from \"../settings/types\";\n\nexport const changeCurrentInput = (input: string): ChangeCurrentInput => {\n    return {\n        type: \"CHANGE_CURRENT_INPUT\",\n        payload: input\n    };\n};\n\nexport const clearCurrentInput = (): ClearCurrentInput => {\n    return {\n        type: \"CLEAR_CURRENT_INPUT\"\n    };\n};\n\nexport const pushMathCell = (content: string, language: Language, significantDigits: SignificantDigits): PushMathCell => {\n    return {\n        type: \"PUSH_MATH_CELL\",\n        payload: {\n            content,\n            language,\n            significantDigits\n        }\n    };\n};\n\nexport const clearMathHistory = (): ClearDocumentCells => {\n    return {\n        type: \"CLEAR_DOCUMENT_CELLS\"\n    };\n};\n\nexport const clearMathUserScope = (): ClearMathUserScope => {\n    return {\n        type: \"CLEAR_MATH_USER_SCOPE\"\n    };\n};\n\nexport const pushTextCell = (content: string): PushTextCell => {\n    return {\n        type: \"PUSH_TEXT_CELL\",\n        payload: content\n    };\n};\n\nexport const updateMathCell = (input: string, index: number, language: Language, significantDigits: SignificantDigits): UpdateMathCell => {\n    return {\n        type: \"UPDATE_MATH_CELL\",\n        payload: {\n            language,\n            significantDigits,\n            input,\n            index\n        }\n    };\n};\n\nexport const selectCell = (index: number): SelectCell => {\n    return {\n        type: \"SELECT_CELL\",\n        payload: index\n    };\n};\n\nexport const setEditCell = (value: boolean): SetEditCell => {\n    return {\n        type: \"SET_EDIT_CELL\",\n        payload: value\n    };\n};\n\nexport const updateTextCell = (index: number, content: string): UpdateTextCell => {\n    return {\n        type: \"UPDATE_TEXT_CELL\",\n        payload: {index, content}\n    };\n};\n\nexport const refreshMathCells = (language: Language, significantDigits: SignificantDigits): RefreshMathCells => {\n    return {\n        type: \"REFRESH_MATH_CELLS\",\n        payload: {\n            language, significantDigits\n        }\n    };\n};\n\nexport const deleteCell = (index: number): DeleteCell => {\n    return {\n        type: \"DELETE_CELL\",\n        payload: index\n    };\n};\n\nexport const loadDocument = (document: DocumentType): LoadDocument => {\n    return {\n        type: \"LOAD_DOCUMENT\",\n        payload: document\n    };\n};\n\nexport const moveCellSelectionUp = (): MoveCellSelectionUp => {\n    return {\n        type: \"MOVE_CELL_SELECTION_UP\"\n    };\n};\n\n\nexport const moveCellSelectionDown = (): MoveCellSelectionDown => {\n    return {\n        type: \"MOVE_CELL_SELECTION_DOWN\"\n    };\n};","import React from \"react\";\nimport InputText from \"../../../common/InputText\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {changeCurrentInput, pushMathCell} from \"../../../../store/session/actions\";\nimport {RootState} from \"../../../../store\";\nimport {useTranslation} from \"react-i18next\";\n\nconst InputField = React.forwardRef((props, forwardedRef) => {\n    const dispatch = useDispatch();\n    const value = useSelector((state: RootState) => state.session.currentInput);\n    const interfaceLanguage = useSelector((state: RootState) => state.settings.interfaceSettings.language);\n    const mathLanguage = useSelector((state: RootState) => state.settings.mathSettings.numberFormat);\n    const significantDigits = useSelector((state: RootState) => state.settings.mathSettings.significantDigits);\n    const [t] = useTranslation();\n\n    const changeInput = (event: React.ChangeEvent<HTMLInputElement>) => {\n        dispatch(changeCurrentInput(event.target.value));\n    };\n\n    const keypressInput = (event: React.KeyboardEvent<HTMLInputElement>) => {\n        if (event.key === \"Enter\")\n            dispatch(pushMathCell(\n                value,\n                mathLanguage === \"inherit\" ? interfaceLanguage : mathLanguage,\n                significantDigits\n            ));\n    }\n\n    // @ts-ignore\n    return (<InputText ref={forwardedRef}\n        type=\"text\"\n        role=\"input math\"\n        placeholder={t(\"common.input\")}\n        aria-label={t(\"common.input\")}\n        onChange={changeInput}\n        onKeyPress={keypressInput}\n        value={value}\n    />);\n});\n\nexport default InputField;","import {useHotkeys} from \"react-hotkeys-hook\";\n\nconst hotkeyFilter = () => true;\nexport const hotkeyOptions = {filter: hotkeyFilter};\n\nconst useHotkey = (hotkey: string, callback: (event: KeyboardEvent) => void, deps?: any[]) => {\n    useHotkeys(hotkey, callback, hotkeyOptions, deps);\n};\n\nexport default useHotkey;","import React from \"react\";\nimport useHotkey from \"./useHotkey\";\n\nconst useHotkeyRef = (hotkey: string, ref: React.RefObject<any>, effect: (ref: React.RefObject<any>) => void) => {\n    useHotkey(hotkey, () => {\n        if (ref.current)\n            effect(ref);\n    }, []);\n};\n\nexport default useHotkeyRef;","import React, {useEffect} from \"react\";\n\nconst useRefEffect = (ref: React.RefObject<any>, effect: (ref: React.RefObject<any>) => void, deps: any[] = []) => {\n    useEffect(() => {\n        if (ref.current)\n            effect(ref);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, deps);\n}\n\nexport default useRefEffect;","import {Cell, MathCell} from \"../../../../store/session/types\";\n\nexport const getMathCells = (cells: Cell[]): MathCell[] => {\n    return cells.flatMap(cell => cell.type === \"MATH\" ? [cell] : []);\n}\n\nexport const getLastOutput = (cells: Cell[]): string => {\n    const lastCell = getMathCells(cells).slice(-1)[0];\n    return lastCell ? lastCell.output : \"\";\n}","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.aside`\n    background-color: ${props => props.theme.sidebar.backgroundColor};\n    color: ${props => props.theme.sidebar.color};\n    box-shadow: 5px 0 5px rgba(0, 0, 0, 0.15);\n    display: flex;\n    flex-direction: column;\n    \n    & button {\n        background: none;\n        border: none;\n        outline: none;\n        font-size: ${props => props.theme.fontSize.m};\n        padding: 0.5em 2em 0.5em 1em;\n        text-align: left;\n        color: inherit;\n    }\n    \n    & button:hover {\n        background-color: ${props => props.theme.sidebarItem.hoverBackgroundColor};\n        font-weight: 400;\n    }\n    \n    & button:disabled:hover {\n        background: none;\n        font-weight: 300;\n    }\n    \n    & button:focus {\n        border: 2px solid black;\n    }\n`;\n\nconst Sidebar: React.FC<{}> = ({children}) => {\n    return (\n        <Container role=\"toolbar\">\n            {children}\n        </Container>\n    )\n};\n\nexport default Sidebar;","import {event} from \"react-ga\";\nimport useSettings from \"./useSettings\";\n\nconst useAnalyticsEvent = () => {\n    const settings = useSettings();\n\n    return (category: string, action: string, label?: string, value?: number) => {\n        if (settings.useAnalytics)\n            event({\n                category,\n                action,\n                label,\n                value\n            });\n    };\n};\n\nexport default useAnalyticsEvent;","import React from \"react\";\nimport Sidebar from \"../../../common/Sidebar\";\nimport {useTranslation} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {clearCurrentInput, clearMathHistory, clearMathUserScope} from \"../../../../store/session/actions\";\nimport {RootState} from \"../../../../store\";\nimport useAnalyticsEvent from \"../../../../hooks/useAnalyticsEvent\";\n\nconst CalculatorSidebar: React.FC = () => {\n    const dispatch = useDispatch();\n    const [t] = useTranslation();\n    const inputForm = useSelector((state: RootState) => state.settings.interfaceSettings.inputForm);\n    const analyticsEvent = useAnalyticsEvent();\n\n    const clearAll = () => {\n        dispatch(clearMathHistory());\n        dispatch(clearCurrentInput());\n        dispatch(clearMathUserScope());\n        analyticsEvent(\"calculator.common.sidebar\", \"clear_all\");\n    };\n\n    const clearHistory = () => {\n        dispatch(clearMathHistory());\n        analyticsEvent(\"calculator.common.sidebar\", \"clear_history\");\n    }\n\n    const clearInput = () => {\n        dispatch(clearCurrentInput());\n        analyticsEvent(\"calculator.common.sidebar\", \"clear_input\");\n    }\n\n    const clearUserScope = () => {\n        dispatch(clearMathUserScope());\n        analyticsEvent(\"calculator.common.sidebar\", \"clear_user_scope\");\n    }\n\n    return (\n        <Sidebar>\n            <button\n                onClick={clearHistory}\n                aria-label={t(inputForm !== \"simple\" ? \"calculator.clear_history\" : \"calculator.clear_output\")}\n            >\n                {t(inputForm !== \"simple\" ? \"calculator.clear_history\" : \"calculator.clear_output\")}\n            </button>\n            <button\n                onClick={clearInput}\n                aria-label={t(\"calculator.clear_input\")}\n            >\n                {t(\"calculator.clear_input\")}\n            </button>\n            <button\n                onClick={clearUserScope}\n                aria-label={t(\"calculator.clear_memory\")}\n            >\n                {t(\"calculator.clear_memory\")}\n            </button>\n            <button\n                onClick={clearAll}\n                aria-label={t(\"calculator.clear_all\")}\n            >\n                {t(\"calculator.clear_all\")}\n            </button>\n            {/*<button disabled={true} style={{marginTop:\"auto\"}}>New Document</button>\n            <button disabled={true}>Save Document</button>\n            <button disabled={true}>Load Document</button>*/}\n        </Sidebar>\n    );\n}\n\nexport default CalculatorSidebar;","import React from \"react\";\nimport styled from \"styled-components\";\nimport CalculatorSidebar from \"../common/CalculatorSidebar\";\n\nconst Container = styled.div`\n    display: grid;\n    grid-template-columns: auto 1fr;\n    height: 100%;\n`;\n\nconst InputFormWithSidebar: React.FC = ({children}) => {\n    return (\n        <Container>\n            <CalculatorSidebar/>\n            {children}\n        </Container>\n    );\n};\n\nexport default InputFormWithSidebar;","import React, {useRef} from \"react\";\nimport styled from \"styled-components\";\nimport {RootState} from \"../../../../store\";\nimport {useSelector} from \"react-redux\";\nimport InputText from \"../../../common/InputText\";\nimport InputField from \"../common/InputField\";\nimport {useTranslation} from \"react-i18next\";\nimport {focusInput, focusOutput} from \"../../../../hotkeys.json\";\nimport useHotkeyRef from \"../../../../hooks/useHotkeyRef\";\nimport useRefEffect from \"../../../../hooks/useRefEffect\";\nimport {getLastOutput} from \"../common/utils\";\nimport InputFormWithSidebar from \"./InputFormWithSidebar\";\n\nconst Container = styled.div`\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst StyledOutputField = styled(InputText)`\n  margin-top: 20px;\n`;\n\nconst SimpleInputForm: React.FC = () => {\n    const lastOutput = getLastOutput(useSelector((state: RootState) => state.session.document.cells));\n    const outputRef = useRef<HTMLInputElement>(null);\n    const inputRef = useRef<HTMLInputElement>(null);\n    const [t] = useTranslation();\n    useRefEffect(outputRef, r => {\n        r.current.focus();\n        r.current.select()\n    }, [lastOutput]);\n    useRefEffect(inputRef, r => r.current.focus());\n    useHotkeyRef(focusInput, inputRef, (r) => r.current.focus());\n    useHotkeyRef(focusOutput, outputRef, (r) => r.current.focus());\n\n    const outputOnKeyPress = (event: React.KeyboardEvent) => {\n        if (event.key === \"Enter\" && inputRef.current)\n            inputRef.current.focus();\n    }\n\n\n    return (\n        <InputFormWithSidebar>\n            <Container>\n                <InputField ref={inputRef} aria-label={t(\"common.input\")}/>\n                <StyledOutputField\n                    aria-label={t(\"common.output\")}\n                    role=\"input math\"\n                    type=\"text\"\n                    readOnly={true}\n                    placeholder={t(\"common.output\")}\n                    value={lastOutput}\n                    ref={outputRef}\n                    onKeyPress={outputOnKeyPress}\n                />\n            </Container>\n        </InputFormWithSidebar>\n    );\n};\n\nexport default SimpleInputForm;","import styled from \"styled-components\";\n\nconst Card = styled.section`\n  color: ${props => props.theme.card.color};\n  background-color: ${props => props.theme.card.backgroundColor};\n  box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.1);\n  font-size: ${props => props.theme.fontSize.m};\n\n  & h1 {\n    font-size: ${props => props.theme.fontSize.l};\n    font-weight: 400;\n    background-color: rgba(0, 0, 0, 0.08);\n    margin: 0;\n    padding: 10px 20px;\n  }\n  \n  & h2 {\n    font-size: ${props => props.theme.fontSize.m};\n    font-weight: 400;\n    margin: 0.5em 0 0 0;\n    padding: 10px 20px;\n  }\n\n  & a {\n    color: inherit;\n    font-weight: bolder;\n  }\n`;\n\nexport default Card;","import React, {useEffect, useRef} from \"react\";\nimport styled from \"styled-components\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RootState} from \"../../../../store\";\nimport InputField from \"../common/InputField\";\nimport Card from \"../../../common/Card\";\nimport {useTranslation} from \"react-i18next\";\nimport {useHotkeys} from \"react-hotkeys-hook\";\nimport {focusInput} from \"../../../../hotkeys.json\";\nimport {changeCurrentInput} from \"../../../../store/session/actions\";\nimport useRefEffect from \"../../../../hooks/useRefEffect\";\nimport {getMathCells} from \"../common/utils\";\nimport InputFormWithSidebar from \"./InputFormWithSidebar\";\n\nconst Container = styled.div`\n  padding: 20px;\n  display: grid;\n  overflow: hidden;\n  grid-template-rows: 1fr auto;\n  grid-gap: 20px;\n`;\n\nconst MathHistoryContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n`;\n\nconst MathHistoryContainerWrapper = styled(Card)`\n  overflow-y: auto;\n  -ms-overflow-style: none;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n`;\n\nconst MathHistoryItemContainer = styled.div<{ showCellNumbers: boolean }>`\n  display: grid;\n  grid-template-columns: ${props => props.showCellNumbers ? \"80px auto 1fr\" : \"auto 1fr\"};\n  grid-template-rows: auto auto;\n  padding: 10px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.25);\n`;\n\nconst MathHistoryItemLineCounter = styled.div`\n  grid-row: span 2;\n  opacity: 0.4;\n  user-select: none;\n  padding: 10px\n`;\n\nconst MathHistoryItemLabel = styled.div`\n  text-align: right;\n  font-weight: 300;\n  font-size: 20pt;\n  align-self: center;\n  padding: 0 10px;\n`;\n\nconst MathHistoryItemValue = styled.span<{ copyable: boolean }>`\n  padding: 10px;\n  ${\n          props => props.copyable ? \"&:hover { background-color: rgba(0, 0, 0, 0.1); }\" : null\n  }\n`;\n\ninterface MathHistoryItemProps {\n    index: number,\n    input: string,\n    output: string\n}\n\nconst MathHistoryItem: React.FC<MathHistoryItemProps> = ({index, input, output}) => {\n    const [t] = useTranslation();\n    const copyOnClick = useSelector((state: RootState) => state.settings.interfaceSettings.copyCellContentOnClick);\n    const showCellNumbers = useSelector((state: RootState) => state.settings.interfaceSettings.showLineNumbers);\n    const language = useSelector((state: RootState) => state.settings.interfaceSettings.language);\n    const cellLanguageTag = useSelector((state: RootState) => state.settings.interfaceSettings.cellLanguageTag);\n    const dispatch = useDispatch();\n\n    const languageTag = cellLanguageTag === \"inherit\" ? language : cellLanguageTag;\n\n    const onClick = (type: \"input\" | \"output\") => {\n        if (copyOnClick)\n            dispatch(changeCurrentInput(type === \"input\"\n                ? input\n                : output\n            ));\n    };\n\n    return (\n        <MathHistoryItemContainer showCellNumbers={showCellNumbers}>\n            {showCellNumbers ? <MathHistoryItemLineCounter>#{index + 1}</MathHistoryItemLineCounter> : null}\n            <MathHistoryItemLabel>{t(\"common.input\")}</MathHistoryItemLabel>\n            <MathHistoryItemValue\n                lang={languageTag}\n                copyable={copyOnClick}\n                onClick={() => onClick(\"input\")}\n            > {input}</MathHistoryItemValue>\n            <MathHistoryItemLabel>{t(\"common.output\")}</MathHistoryItemLabel>\n            <MathHistoryItemValue\n                lang={languageTag}\n                copyable={copyOnClick}\n                onClick={() => onClick(\"output\")}\n            > {output}</MathHistoryItemValue>\n        </MathHistoryItemContainer>\n    );\n}\n\nconst MathHistory: React.FC<{ items: MathHistoryItemProps[] }> = ({items}) => {\n    const containerRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        if (containerRef.current)\n            containerRef.current.scrollTop = containerRef.current.scrollHeight;\n    }, [items])\n\n    return (\n        <MathHistoryContainerWrapper ref={containerRef}>\n            <MathHistoryContainer>\n                {\n                    items.map(item => <MathHistoryItem\n                        key={item.index}\n                        index={item.index}\n                        input={item.input}\n                        output={item.output}\n                    />)\n                }\n            </MathHistoryContainer>\n        </MathHistoryContainerWrapper>\n    )\n}\n\nconst AdvancedInputForm: React.FC = () => {\n    const mathHistory = getMathCells(useSelector((state: RootState) => state.session.document.cells));\n    const inputRef = useRef<HTMLInputElement>(null);\n    const [t] = useTranslation();\n    useHotkeys(focusInput, () => {\n        if (inputRef.current)\n            inputRef.current.focus();\n    }, {filter: () => true}, []);\n    useRefEffect(inputRef, (r) => r.current.focus(), []);\n\n    return (\n        <InputFormWithSidebar>\n            <Container>\n                <MathHistory items={mathHistory.map((item, i) => ({...item, index: i}))}/>\n                <InputField ref={inputRef} aria-label={t(\"common.input\")}/>\n            </Container>\n        </InputFormWithSidebar>\n    );\n};\n\nexport default AdvancedInputForm;","import styled from \"styled-components\";\n\nconst Cell = styled.li<{ selected: boolean }>`\n  margin: 10px 0;\n  ${props => props.selected === true\n          ? ` border-color: ${props.theme.documentCell.borderSelectedColor};\n              border-style: solid;\n              border-width: 1px 1px 1px 4px;\n              padding: 10px 10px 10px 7px;`\n          : ` border: 1px solid ${props.theme.documentCell.borderColor};\n              padding: 10px;`\n  }\n  \n  & dd, dt {\n    padding: 0;\n    margin: 0;\n  }\n  \n  & dl {\n    padding: 0;\n    margin: 0;\n    display: flex;\n    flex-direction: column;\n  }\n`;\n\nexport default Cell;","import useSettings from \"./useSettings\";\n\nconst useNumberFormat = () => {\n    const settings = useSettings();\n    return settings.mathSettings.numberFormat === \"inherit\"\n        ? settings.interfaceSettings.language\n        : settings.mathSettings.numberFormat;\n}\n\nexport default useNumberFormat;","import {useSelector} from \"react-redux\";\nimport {RootState} from \"../store\";\n\nconst useSession = () => {\n    return useSelector((state: RootState) => state.session);\n}\n\nexport default useSession;","import React, {useEffect, useRef, useState} from \"react\";\nimport styled from \"styled-components\";\nimport Cell from \"./Cell\";\nimport InputText from \"../../../../../common/InputText\";\nimport {useDispatch} from \"react-redux\";\nimport useNumberFormat from \"../../../../../../hooks/useNumberFormat\";\nimport useSettings from \"../../../../../../hooks/useSettings\";\nimport useSession from \"../../../../../../hooks/useSession\";\nimport {selectCell, setEditCell, updateMathCell} from \"../../../../../../store/session/actions\";\nimport {useTranslation} from \"react-i18next\";\n\nconst Container = styled(Cell)<{ edit: boolean }>`\n  display: grid;\n  grid-column-gap: 20px;\n  grid-template-columns: ${props => !props.edit ? \"auto 1fr\" : \"1fr\"};\n`;\n\nconst Input = styled(InputText)`\n  background-color: inherit;\n  padding: 0;\n  box-shadow: none;\n  margin: 0;\n\n  &:focus {\n    outline: none;\n  }\n`;\n\nconst Label = styled.label`\n  font-size: ${props => props.theme.fontSize.s};\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n`;\n\nconst MathCell: React.FC<MathCellProps> = ({input, output, index}) => {\n    const settings = useSettings();\n    const session = useSession();\n    const dispatch = useDispatch();\n    const numberFormat = useNumberFormat();\n    const [inputValue, setInputValue] = useState(input);\n    const [saved, setSaved] = useState(true);\n    const inputRef = useRef<HTMLInputElement>(null);\n    const [t] = useTranslation();\n\n    useEffect(() => {\n        if (session.editCell && session.selectedCell === index)\n            if (inputRef.current)\n                inputRef.current.focus();\n    }, [inputRef, session.editCell, session.selectedCell, index]);\n\n    useEffect(() => {\n        if(!saved && !session.editCell) {\n            dispatch(updateMathCell(inputValue, index, numberFormat, settings.mathSettings.significantDigits));\n            setSaved(true);\n        }\n    }, [saved, session.editCell, dispatch, index, inputValue, numberFormat, settings.mathSettings.significantDigits]);\n\n    const setSelection = () => {\n        if (session.selectedCell !== index) {\n            dispatch(setEditCell(false));\n            dispatch(selectCell(index));\n        }\n    };\n\n    const enterEditMode = () => {\n        dispatch(selectCell(index));\n        dispatch(setEditCell(true));\n    }\n\n    const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setInputValue(event.target.value);\n        setSaved(false);\n    }\n\n    const onKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n        if (event.key === \"Escape\") {\n            setInputValue(input);\n            setSaved(true);\n            dispatch(setEditCell(false));\n        }\n    };\n\n    return (\n        <Container\n            onClick={setSelection}\n            selected={index === session.selectedCell}\n            onDoubleClick={enterEditMode}\n            edit={session.editCell && index === session.selectedCell}\n        >\n            {\n                session.editCell && index === session.selectedCell ? (\n                    <div>\n                        <Input\n                            ref={inputRef}\n                            value={inputValue}\n                            onChange={onChange}\n                            onKeyDown={onKeyDown}\n                        />\n                    </div>\n                ) : (\n                    <>\n                        <Label>\n                            {t(\"common.input\")}\n                        </Label>\n                        <Value>{input}</Value>\n                        <Label>\n                            {t(\"common.output\")}\n                        </Label>\n                        <Value>{output}</Value>\n                    </>\n                )\n            }\n        </Container>\n    );\n};\n\nconst Value = styled.span``;\n\ninterface MathCellProps {\n    input: string,\n    output: string,\n    index: number\n}\n\nexport default MathCell;","import React, {useEffect, useRef, useState} from \"react\";\nimport styled from \"styled-components\";\nimport Cell from \"./Cell\";\nimport ReactMarkdown from \"react-markdown\";\nimport useSession from \"../../../../../../hooks/useSession\";\nimport {selectCell, setEditCell, updateTextCell} from \"../../../../../../store/session/actions\";\nimport {useDispatch} from \"react-redux\";\nimport {useHotkeys} from \"react-hotkeys-hook\";\nimport {document as documentHotkeys} from \"../../../../../../hotkeys.json\";\n\nconst Container = styled(Cell)`\n  & * {\n    background-color: inherit;\n    color: inherit;\n    border: none;\n  }\n  \n  & ul {\n    list-style-type: disc;\n  }\n  \n  & h1 {\n    font-size: 1.5em;\n  }\n\n  & h2 {\n    font-size: 1.4em;\n  }\n\n  & h3 {\n    font-size: 1.3em;\n  }\n\n  & h4 {\n    font-size: 1.2em;\n  }\n\n  & h5 {\n    font-size: 1.1em;\n  }\n\n  & h6 {\n    font-size: 1em;\n  }\n  \n  & h1, h2, h3, h4, h5, h6 {\n    margin: 0 0 0.2em 0;\n    padding: 0;\n    font-weight: bolder;\n  }\n  \n  & > p {\n    margin: 5px 0;\n  }\n  \n  & > pre {\n    display: inline-block;\n    margin: 10px 0;\n    padding: 5px 10px;\n    border-radius: 8px;\n    background-color: rgba(0, 0, 0, 0.2);\n  }\n  & > pre code {\n    background-color: transparent;\n  }\n\n  & p > code {\n    padding: 5px;\n    border-radius: 8px;\n    background-color: rgba(0, 0, 0, 0.2);\n  }\n  \n  & strong {\n    font-weight: bold;\n  }\n`;\n\nconst TextArea = styled.textarea`\n  width: 100%;\n  margin: 0;\n  height: 25vh;\n`;\n\ninterface TextCellProps {\n    index: number,\n    content: string\n}\n\nconst TextCell: React.FC<TextCellProps> = ({index, content}) => {\n    const dispatch = useDispatch();\n    const session = useSession();\n    const [value, setValue] = useState(content);\n    const [saved, setSaved] = useState(true);\n    const textAreaRef = useRef<HTMLTextAreaElement>(null);\n    useEffect(() => {\n        if (textAreaRef.current && session.selectedCell === index && session.editCell)\n            textAreaRef.current.focus();\n    }, [session.editCell, session.selectedCell, index]);\n    useEffect(() => {\n        if (textAreaRef.current) {\n            // @ts-ignore\n            textAreaRef.current.style.height = textAreaRef.current?.scrollHeight + \"px\";\n        }\n    },[value, session.editCell])\n    useEffect(() => {\n        if (!session.editCell && !saved) {\n            dispatch(updateTextCell(index, value));\n            setSaved(true);\n        }\n    }, [session.editCell, saved, dispatch, index, value, setSaved]);\n    useHotkeys(documentHotkeys.newLine, () => {\n        setValue(`${value}\\n`);\n    }, [value]);\n\n    const selectThisCell = () => {\n        if (index !== session.selectedCell) {\n            dispatch(setEditCell(false));\n            dispatch(selectCell(index));\n        }\n    };\n\n    const enterEditMode = () => {\n        dispatch(setEditCell(true));\n    };\n\n    const changeValue = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setValue(event.target.value);\n        setSaved(false);\n    };\n\n    const onKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {\n        if (event.key === \"Escape\") {\n            setValue(content);\n            setSaved(true);\n            dispatch(setEditCell(false));\n        }\n    };\n\n    return (\n        <Container\n            selected={index === session.selectedCell}\n            onClick={selectThisCell}\n            onDoubleClick={enterEditMode}\n        >\n            {\n                index === session.selectedCell && session.editCell\n                    ? (<TextArea\n                        ref={textAreaRef}\n                        value={value}\n                        onChange={changeValue}\n                        onKeyDown={onKeyDown}\n                    />)\n                    : (<ReactMarkdown children={content}/>)\n            }\n        </Container>\n    );\n};\n\nexport default TextCell","export default __webpack_public_path__ + \"static/media/Text.70c55635.svg\";","export default __webpack_public_path__ + \"static/media/Math.432b21f4.svg\";","export default __webpack_public_path__ + \"static/media/Pen.6fec3190.svg\";","export default __webpack_public_path__ + \"static/media/Reload.034a8b21.svg\";","export default __webpack_public_path__ + \"static/media/Trash.2ecec299.svg\";","export default __webpack_public_path__ + \"static/media/Import.b3dbc33f.svg\";","export default __webpack_public_path__ + \"static/media/Export.0beb946f.svg\";","export default __webpack_public_path__ + \"static/media/Cloud.384dbeea.svg\";","import React from \"react\";\nimport styled from \"styled-components\";\nimport useAnalyticsEvent from \"../../../../../../hooks/useAnalyticsEvent\";\nimport {useTranslation} from \"react-i18next\";\n\nconst Button = styled.button<{ active: boolean }>`\n  opacity: ${props => props.active ? \"1\" : \"0.5\"};\n  width: 100%;\n  padding: 10px;\n  background-color: ${props => props.active ? props.theme.sidebarItem.hoverBackgroundColor : \"inherit\"};\n  border: none;\n  outline: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:disabled {\n    opacity: 0.1;\n  }\n\n  &:enabled:hover {\n    opacity: 1;\n    border: 1px solid ${props => props.theme.icon.borderColor};\n    background-color: ${props => props.theme.sidebarItem.hoverBackgroundColor};\n    padding: 9px;\n  }\n\n  &:first-child {\n    border-radius: 8px 8px 0 0;\n  }\n\n  &:last-child {\n    border-radius: 0 0 8px 8px;\n  }\n`;\n\nconst Img = styled.img`\n  filter: ${props => props.theme.icon.filter};\n  width: 50px;\n  height: 50px;\n`;\n\ninterface IconProps {\n    src: string,\n    onClick?: () => void,\n    disabled?: boolean,\n    active?: boolean,\n    label: string\n}\n\nconst IconButton: React.FC<IconProps> = ({\n     src,\n     onClick,\n     disabled,\n     active,\n     label,\n }) => {\n    const analyticsEvent = useAnalyticsEvent();\n    const [t] = useTranslation();\n\n    const clickWrapper = () => {\n        if (!(!onClick || disabled)) {\n            const labelParts = label.split(\".\");\n            const analyticsCategory = labelParts.slice(0, labelParts.length - 1).join(\".\");\n            const analyticsAction = labelParts[labelParts.length - 1];\n\n            analyticsEvent(analyticsCategory, analyticsAction);\n            onClick();\n        }\n    }\n\n    return (\n        <Button\n            disabled={!onClick || disabled}\n            active={!!active}\n            onClick={clickWrapper}\n            aria-label={t(label)}\n        >\n            <Img src={src}/>\n        </Button>\n    );\n};\n\nexport default IconButton;","import {useEffect, useState} from \"react\";\nimport {useDispatch} from \"react-redux\";\nimport {loadDocument} from \"../store/session/actions\";\nimport {Document as DocumentType} from \"../store/session/types\";\n\nconst useLoadDocument = () => {\n    const [documentData, setDocumentData] = useState<DocumentType | null>(null);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if (documentData !== null) {\n            dispatch(loadDocument(documentData));\n            setDocumentData(null);\n        }\n    });\n\n    return setDocumentData;\n}\n\nexport default useLoadDocument;","import {v4 as uuid} from \"uuid\";\nimport useLoadDocument from \"./useLoadDocument\";\n\nconst useImportDocument = () => {\n    const loadDocument = useLoadDocument();\n\n    return () => {\n        const loadData = async () => {\n            // @ts-ignore\n            const [fileHandle] = await window.showOpenFilePicker();\n            const file = await fileHandle.getFile();\n            const content = await file.text();\n            const data = JSON.parse(content);\n            if (typeof data === \"object\") {\n                if (typeof data.title === \"string\") {\n                    if (data.cells instanceof Array) {\n                        data.cells.forEach((cell: any) => {\n                            if (cell.type === \"MATH\" && typeof cell.input === \"string\" && typeof cell.output === \"string\")\n                                return;\n                            if (cell.type === \"TEXT\" && typeof cell.content === \"string\")\n                                return;\n                            throw \"file data validation failed\";\n                        });\n                        loadDocument({\n                            title: data.title,\n                            cells: data.cells.map((cell: any) => cell.type === \"MATH\"\n                                ? {type: \"MATH\", uuid: uuid(), input: cell.input, output: cell.output}\n                                : {type: \"TEXT\", uuid: uuid(), content: cell.content}\n                            )\n                        });\n                        return;\n                    }\n                }\n            }\n            throw \"file data validation failed\";\n        }\n        loadData().catch(console.error);\n    };\n};\n\nexport default useImportDocument;","import useSession from \"./useSession\";\n\n\nconst useExportDocument = () => {\n    const session = useSession();\n\n    return () => {\n        const documentData = JSON.stringify(session.document, null, 4);\n        const saveData = async () => {\n            const options = {\n                types: [{\n                    description: 'JSON Files',\n                    accept: {\n                        'application/json': ['.json'],\n                    }\n                }]\n            };\n            // @ts-ignore\n            const fileHandle = await window.showSaveFilePicker(options);\n            const writable = await fileHandle.createWritable();\n            writable.write(documentData);\n            writable.close();\n        }\n        saveData().catch(console.error);\n    };\n};\n\nexport default useExportDocument;","const baseUrl = \"https://api.jsonbin.io\";\nconst collectionId = process.env.REACT_APP_JSON_BIN_COLLECTION as string;\nconst apiKey = process.env.REACT_APP_JSON_BIN_API_KEY as string;\n\nconsole.log(\"debug info\");\nconsole.log(\"apikey\", apiKey);\nconsole.log(\"collectionid\", collectionId);\n\nexport const fetchBin = async (id: string) => {\n    return await fetch(`${baseUrl}/b/${id}`, {\n        method: \"GET\",\n        headers: {\n            \"secret-key\": apiKey\n        }\n    })\n        .then(response => response.json())\n        .catch(console.error);\n};\n\nexport const updateBin = (id: string, content: Object) => {\n    fetch(`${baseUrl}/b/${id}`, {\n        method: \"PUT\",\n        headers: {\n            \"secret-key\": apiKey,\n            \"Content-Type\": \"application/json\",\n            \"versioning\": \"false\"\n        },\n        body: JSON.stringify(content)\n    }).catch(console.error)\n};\n\nexport const createBin = async (bin: Object): Promise<string> => {\n    return await fetch(`${baseUrl}/b`, {\n        method: \"POST\",\n        headers: {\n            \"secret-key\": apiKey,\n            \"Content-Type\": \"application/json\",\n            \"collection-id\": collectionId\n        },\n        body: JSON.stringify(bin)\n    }).then(response => response.json()).then(data => {console.log(data.id); return data.id;});\n};\n","import useSession from \"./useSession\";\nimport {createBin} from \"../apis/jsonBin\";\nimport {useHistory} from \"react-router-dom\";\n\nconst useCloudUpload = () => {\n    const document = useSession().document;\n    const history = useHistory();\n\n    return () => {\n        createBin(document)\n            .then(id => history.push(`/upload-document/${id}`))\n            .catch(console.error);\n    };\n}\n\nexport default useCloudUpload;","import React from \"react\";\nimport styled from \"styled-components\";\nimport TextIcon from \"../../../../../icons/Text.svg\";\nimport MathIcon from \"../../../../../icons/Math.svg\";\nimport PenIcon from \"../../../../../icons/Pen.svg\";\nimport ReloadIcon from \"../../../../../icons/Reload.svg\";\nimport TrashIcon from \"../../../../../icons/Trash.svg\";\nimport ImportIcon from \"../../../../../icons/Import.svg\";\nimport ExportIcon from \"../../../../../icons/Export.svg\";\nimport CloudIcon from \"../../../../../icons/Cloud.svg\";\nimport {useDispatch} from \"react-redux\";\nimport {\n    deleteCell as deleteCellAction,\n    pushMathCell,\n    pushTextCell,\n    refreshMathCells,\n    selectCell,\n    setEditCell\n} from \"../../../../../../store/session/actions\";\nimport useSession from \"../../../../../../hooks/useSession\";\nimport useNumberFormat from \"../../../../../../hooks/useNumberFormat\";\nimport useSettings from \"../../../../../../hooks/useSettings\";\nimport IconButton from \"./IconButton\";\nimport {getMathCells} from \"../../../common/utils\";\nimport useImportDocument from \"../../../../../../hooks/useImportDocument\";\nimport useExportDocument from \"../../../../../../hooks/useExportDocument\";\nimport useCloudUpload from \"../../../../../../hooks/useCloudUpload\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Container = styled.div`\n  width: 80px;\n  display: flex;\n  flex-direction: column;\n  background-color: ${props => props.theme.card.backgroundColor};\n  box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n`;\n\nconst DocumentInputFormToolbar: React.FC = () => {\n    const dispatch = useDispatch();\n    const session = useSession();\n    const settings = useSettings();\n    const numberFormat = useNumberFormat();\n    const importDocument = useImportDocument();\n    const exportDocument = useExportDocument();\n    const cloudUpload = useCloudUpload();\n\n    const addMathCell = () => {\n        dispatch(selectCell(session.document.cells.length));\n        dispatch(pushMathCell(\"\", numberFormat, settings.mathSettings.significantDigits));\n        dispatch(setEditCell(true));\n    };\n\n    const addTextCell = () => {\n        dispatch(selectCell(session.document.cells.length));\n        dispatch(pushTextCell(\"\"));\n        dispatch(setEditCell(true));\n    };\n\n    const toggleEditCell = () => {\n        dispatch(setEditCell(!session.editCell));\n    };\n\n    const refresh = () => {\n        dispatch(refreshMathCells(numberFormat, settings.mathSettings.significantDigits));\n    };\n\n    const deleteCell = () => {\n        dispatch(deleteCellAction(session.selectedCell));\n    };\n\n    const documentHasMathCells = () => {\n        return getMathCells(session.document.cells).length > 0;\n    }\n\n    const isCellSelected = () => {\n        return !!session.document.cells[session.selectedCell];\n    };\n\n\n    return (\n        <Wrapper>\n            <Container>\n                <IconButton\n                    src={PenIcon}\n                    onClick={toggleEditCell}\n                    active={session.editCell}\n                    label=\"calculator.document.toolbar.toggle_edit_cell\"\n\n                />\n                <IconButton\n                    src={TextIcon}\n                    onClick={addTextCell}\n                    label=\"calculator.document.toolbar.add_text_cell\"\n                />\n                <IconButton\n                    src={MathIcon}\n                    onClick={addMathCell}\n                    label=\"calculator.document.toolbar.add_math_cell\"\n                />\n                <IconButton\n                    src={ReloadIcon}\n                    onClick={refresh}\n                    disabled={!documentHasMathCells()}\n                    label=\"calculator.document.toolbar.refresh_math_cells\"\n                />\n                <IconButton\n                    src={TrashIcon}\n                    onClick={deleteCell}\n                    disabled={!isCellSelected()}\n                    label=\"calculator.document.toolbar.delete_cell\"\n                />\n                <IconButton\n                    src={ImportIcon}\n                    onClick={importDocument}\n                    label=\"calculator.document.toolbar.import_document\"\n                />\n                <IconButton\n                    src={ExportIcon}\n                    onClick={exportDocument}\n                    label=\"calculator.document.toolbar.export_document\"\n                />\n                <IconButton\n                    src={CloudIcon}\n                    onClick={cloudUpload}\n                    label=\"calculator.document.toolbar.upload_to_cloud\"\n                />\n            </Container>\n        </Wrapper>\n    )\n};\n\nexport default DocumentInputFormToolbar;","import {useEffect, useState} from \"react\";\nimport {useDispatch} from \"react-redux\";\nimport useHotkey from \"./useHotkey\";\n\nconst hotkeyFilter = () => true;\nexport const hotkeyOptions = {filter: hotkeyFilter};\n\ninterface Action {\n    type: string,\n}\n\nconst useHotkeyDispatch = (hotkey: string, action: Action | Action[], condition: boolean = true) => {\n    const dispatch = useDispatch();\n    const [dispatchAction, setDispatchAction] = useState(false);\n    useHotkey(hotkey, (e) => {\n        if (condition) {\n            e.preventDefault();\n            setDispatchAction(true);\n        }\n    }, [condition]);\n    useEffect(() => {\n        if (dispatchAction) {\n            setDispatchAction(false);\n            if (action instanceof Array) {\n                action.forEach(a => dispatch(a));\n            } else {\n                dispatch(action);\n            }\n        }\n    }, [dispatchAction]);\n}\n\nexport default useHotkeyDispatch;","import useHotkeyDispatch from \"../../../../../hooks/useHotkeyDispatch\";\nimport {document as documentHotkeys} from \"../../../../../hotkeys.json\";\nimport {\n    deleteCell,\n    moveCellSelectionDown,\n    moveCellSelectionUp, selectCell,\n    setEditCell\n} from \"../../../../../store/session/actions\";\nimport useSession from \"../../../../../hooks/useSession\";\nimport useImportDocument from \"../../../../../hooks/useImportDocument\";\nimport useHotkey from \"../../../../../hooks/useHotkey\";\nimport useExportDocument from \"../../../../../hooks/useExportDocument\";\n\n\nconst useDocumentHotkeys = () => {\n    const session = useSession();\n    const edit = session.editCell;\n    const importDocument = useImportDocument();\n    const exportDocument = useExportDocument();\n\n    useHotkey(documentHotkeys.openDocument, (event) => {\n        event.preventDefault();\n        importDocument();\n    });\n    useHotkey(documentHotkeys.saveDocument, (event) => {\n        event.preventDefault();\n        exportDocument();\n    });\n    useHotkeyDispatch(documentHotkeys.toggleEditCell, setEditCell(!session.editCell),\n        session.selectedCell >= 0 && session.selectedCell < session.document.cells.length\n    );\n    useHotkeyDispatch(documentHotkeys.deleteSelectedCell, deleteCell(session.selectedCell), !edit);\n    useHotkeyDispatch(documentHotkeys.moveCellSelectionDown, moveCellSelectionDown(), !edit);\n    useHotkeyDispatch(documentHotkeys.moveCellSelectionUp, moveCellSelectionUp(), !edit);\n    useHotkeyDispatch(documentHotkeys.moveToStartOfDocument, selectCell(0), !edit);\n    useHotkeyDispatch(documentHotkeys.moveToEndOfDocument, selectCell(session.document.cells.length - 1), !edit);\n};\n\nexport default useDocumentHotkeys;","import React from \"react\";\nimport styled from \"styled-components\";\nimport MathCell from \"./cells/MathCell\";\nimport useSession from \"../../../../../hooks/useSession\";\nimport TextCell from \"./cells/TextCell\";\nimport DocumentInputFormToolbar from \"./toolbar/DocumentInputFormToolbar\";\nimport useDocumentHotkeys from \"./useDocumentHotkeys\";\n\nconst Container = styled.div`\n  display: grid;\n  grid-template-columns: auto 1fr;\n  overflow: hidden;\n  grid-gap: 20px;\n  width: 100%;\n  height: 100%;\n  padding: 20px;\n  color: ${props => props.theme.card.color};\n`;\n\nconst Document = styled.main`\n  background-color: ${props => props.theme.card.backgroundColor};\n  box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.2);\n  padding: 10px;\n  overflow: auto;\n  border-radius: 8px;\n\n  & h1 {\n    padding: 10px;\n    font-weight: bolder;\n  }\n\n  & button {\n    background-color: inherit;\n    color: inherit;\n    border: 1px solid white;\n    padding: 0.25em 1em;\n  }\n\n  & button:hover {\n    background-color: rgba(255, 255, 255, 0.2);\n  }\n`;\n\nconst CellList = styled.ul`\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n`;\n\n// todo: render and edit document title\nconst DocumentInputForm: React.FC = () => {\n    const cells = useSession().document.cells;\n    useDocumentHotkeys();\n\n    return (\n        <Container>\n            <DocumentInputFormToolbar/>\n            <Document>\n                <CellList>\n                    {\n                        cells.map((cell, i) => cell.type === \"MATH\"\n                            ? (<MathCell\n                                key={cell.uuid}\n                                input={cell.input}\n                                output={cell.output}\n                                index={i}\n                            />)\n                            : (<TextCell\n                                key={cell.uuid}\n                                index={i}\n                                content={cell.content}\n                            />))\n                    }\n                </CellList>\n            </Document>\n        </Container>\n    );\n};\n\nexport default DocumentInputForm;","import {pageview} from \"react-ga\";\nimport useSettings from \"./useSettings\";\nimport {useEffect} from \"react\";\n\nconst usePageView = (path: string) => {\n    const settings = useSettings();\n    useEffect(() => {\n        if (settings.useAnalytics)\n            pageview(path);\n    }, []);\n}\n\nexport default usePageView;","import React from \"react\";\nimport SimpleInputForm from \"./inputforms/SimpleInputForm\";\nimport AdvancedInputForm from \"./inputforms/AdvancedInputForm\";\nimport DocumentInputForm from \"./inputforms/document/DocumentInputForm\";\nimport {useSelector} from \"react-redux\";\nimport {RootState} from \"../../../store\";\nimport {clearAll, clearInput, clearMemory, clearOutput, copyInputAndOutput} from \"../../../hotkeys.json\";\nimport {clearCurrentInput, clearMathHistory, clearMathUserScope} from \"../../../store/session/actions\";\nimport useHotkeyDispatch, {hotkeyOptions} from \"../../../hooks/useHotkeyDispatch\";\nimport {useHotkeys} from \"react-hotkeys-hook\";\nimport {useTranslation} from \"react-i18next\";\nimport {InputForm} from \"../../../store/settings/types\";\nimport usePageView from \"../../../hooks/usePageView\";\nimport useAnalyticsEvent from \"../../../hooks/useAnalyticsEvent\";\n\nconst getOutput = (state: RootState) => {\n    const lastCell = state.session.document.cells.slice(-1)[0];\n    if (lastCell) {\n        return lastCell.type === \"MATH\" ? lastCell.output : lastCell.content;\n    }\n    return \"\";\n}\n\nconst selectInputForm = (inputForm: InputForm) => {\n    switch (inputForm) {\n        case \"advanced\":\n            return <AdvancedInputForm/>;\n        case \"simple\":\n            return <SimpleInputForm/>;\n        case \"document\":\n            return <DocumentInputForm/>;\n    }\n}\n\nconst Calculator: React.FC = () => {\n    usePageView(\"/calculator\");\n    const analyticsEvent = useAnalyticsEvent();\n    const inputForm = useSelector((state: RootState) => state.settings.interfaceSettings.inputForm);\n    const [t] = useTranslation();\n    const [currentInput, currentOutput] = useSelector((state: RootState) => [state.session.currentInput, getOutput(state)]);\n    useHotkeyDispatch(clearInput, clearCurrentInput());\n    useHotkeyDispatch(clearOutput, clearMathHistory());\n    useHotkeyDispatch(clearMemory, clearMathUserScope());\n    useHotkeyDispatch(clearAll, [clearCurrentInput(), clearMathHistory(), clearMathUserScope()]);\n    useHotkeys(copyInputAndOutput, () => {\n        navigator.clipboard.writeText(`${t(\"common.input\")}: ${currentInput}\\n${t(\"common.output\")}: ${currentOutput}`).catch(console.error);\n    }, hotkeyOptions, [currentInput, currentOutput]);\n    analyticsEvent(\"InputForm\", inputForm);\n\n    return (\n        <>\n            {selectInputForm(inputForm)}\n        </>\n    );\n};\n\nexport default Calculator;","import React from \"react\";\nimport styled from \"styled-components\";\nimport {useTranslation} from \"react-i18next\";\n\nconst Container = styled.li`\n    padding: 10px 20px;\n    font-size: 28pt;\n    display: flex;\n`;\n\nconst Label = styled.label`\n    \n`;\n\nconst Select = styled.select`\n    font-size: ${props => props.theme.fontSize.m};\n    color: inherit;\n    background-color: inherit;\n    margin-left: auto;\n    min-width: 250px;\n  \n    & > option {\n      color: initial;\n      background-color: initial;\n    }\n`;\n\ninterface OptionProps {\n    label: string,\n    value: any\n}\n\ninterface Props {\n    label: string,\n    options: OptionProps[],\n    value: any,\n    setter: (value: any) => void\n}\n\nconst SettingsItem: React.FC<Props> = ({label, options, value, setter}) => {\n    const [t] = useTranslation();\n\n    const changeHandler = (event: React.ChangeEvent<HTMLSelectElement>) => {\n        setter(event.target.value);\n    }\n\n    return (\n        <Container>\n            <Label id={label}>{t(label)}</Label>\n            <Select value={value} onChange={changeHandler} aria-labelledby={label}>\n                {options.map((option, index) => (\n                    <option value={option.value} key={index}>{option.label}</option>\n                ))}\n            </Select>\n        </Container>\n    );\n};\n\nexport default SettingsItem;","import React from \"react\";\nimport styled from \"styled-components\";\nimport Card from \"../../common/Card\";\nimport SettingsItem from \"./SettingsItem\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RootState} from \"../../../store\";\nimport {useTranslation} from \"react-i18next\";\nimport {themes} from \"../../../hooks/useTheme\";\nimport usePageView from \"../../../hooks/usePageView\";\n\nconst Container = styled.div`\n    display: flex;\n    flex-direction: column;\n    padding: 20px 15%;\n    overflow-y: auto;\n`;\n\nconst SettingsCard = styled(Card)`\n  margin-bottom: 20px;\n  \n  & ul {\n    padding: 0;\n    margin: 0;\n    list-style-type: none;\n  }\n`;\n\n\nconst Settings: React.FC = () => {\n    usePageView(\"/settings\");\n    const settings = useSelector((state: RootState) => state.settings);\n    const dispatch = useDispatch();\n    const [t] = useTranslation();\n\n    const languageOptions = [{label: \"EN\", value: \"en\"}, {label: \"DE\", value: \"de\"}];\n    const languageWithInheritOptions = [...languageOptions, {label: t(\"common.inherit\"), value: \"inherit\"}];\n    const enableOptions = [{label: t(\"common.enable\"), value: true}, {label: t(\"common.disable\"), value: false}];\n    const fontSizeOptions = [\n        {label: t(\"common.large\"), value: \"large\"},\n        {label: t(\"common.medium\"), value: \"medium\"},\n        {label: t(\"common.small\"), value: \"small\"},\n    ];\n    const inputFormOptions = [\n        {label: t(\"settings.input_form.simple\"), value: \"simple\"},\n        {label: t(\"settings.input_form.advanced\"), value: \"advanced\"},\n        {label: t(\"settings.input_form.document\"), value: \"document\"},\n    ]\n\n    const updateSettings = (updatedSettings: {interfaceSettings?: {}, mathSettings?: {}, useAnalytics?: boolean}) => {\n        dispatch({\n            type: \"SET_SETTINGS\",\n            payload: {\n                ...settings, ...updatedSettings,\n                interfaceSettings: {...settings.interfaceSettings, ...updatedSettings.interfaceSettings},\n                mathSettings: {...settings.mathSettings, ...updatedSettings.mathSettings}\n            }\n        });\n    };\n\n    const updateInterfaceSettings = (updatedValues: {}) => {\n        updateSettings({interfaceSettings: updatedValues});\n    };\n\n    return (\n        <Container>\n            <SettingsCard>\n                <h1>{t(\"settings.categories.interface\")}</h1>\n                <ul>\n                    <SettingsItem\n                        label=\"settings.language\"\n                        options={languageOptions}\n                        value={settings.interfaceSettings.language}\n                        setter={value => updateInterfaceSettings({language:  value})}\n                    />\n                    <SettingsItem\n                        label=\"settings.input_form\"\n                        options={inputFormOptions}\n                        value={settings.interfaceSettings.inputForm}\n                        setter={value => updateInterfaceSettings({inputForm: value })}\n                    />\n                    <SettingsItem\n                        label=\"settings.copy_manual_content_on_click\"\n                        options={enableOptions}\n                        value={settings.interfaceSettings.copyManualContentOnClick}\n                        setter={value => updateInterfaceSettings({copyManualContentOnClick: value === \"true\"})}\n                    />\n\n                    <h2>{t(\"settings.categories.advanced_input_form\")}</h2>\n                    <SettingsItem\n                        label=\"settings.show_cell_numbers\"\n                        options={enableOptions}\n                        value={settings.interfaceSettings.showLineNumbers}\n                        setter={value => updateInterfaceSettings({showLineNumbers: value === \"true\"})}\n                    />\n                    <SettingsItem\n                        label=\"settings.copy_cell_content_on_click\"\n                        options={enableOptions}\n                        value={settings.interfaceSettings.copyCellContentOnClick}\n                        setter={value => updateInterfaceSettings({copyCellContentOnClick: value === \"true\"})}\n                    />\n                    <SettingsItem\n                        label=\"settings.cell_language_tag\"\n                        options={languageWithInheritOptions}\n                        value={settings.interfaceSettings.cellLanguageTag}\n                        setter={value => updateInterfaceSettings({cellLanguageTag: value})}\n                    />\n\n                    <h2>{t(\"settings.categories.appearance\")}</h2>\n                    <SettingsItem\n                        label=\"settings.theme\"\n                        options={themes.map(theme => {return {label: theme.toUpperCase(), value: theme}})}\n                        value={settings.interfaceSettings.theme}\n                        setter={value => updateInterfaceSettings({theme: value})}\n                    />\n                    <SettingsItem\n                        label=\"settings.font_size\"\n                        options={fontSizeOptions}\n                        value={settings.interfaceSettings.fontSize}\n                        setter={value => updateInterfaceSettings({fontSize: value})}\n                    />\n                    <SettingsItem\n                        label=\"settings.show_background_image\"\n                        options={enableOptions}\n                        value={settings.interfaceSettings.showBackgroundImage}\n                        setter={value => updateInterfaceSettings({showBackgroundImage: value === \"true\" })}\n                    />\n                </ul>\n            </SettingsCard>\n            <SettingsCard>\n                <h1>{t(\"settings.categories.calculator\")}</h1>\n                <ul>\n                    <SettingsItem\n                        label=\"settings.significant_decimal_places\"\n                        options={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15].map(x => {return {\n                            label: `${x}`,\n                            value: x\n                        }})}\n                        value={settings.mathSettings.significantDigits}\n                        setter={value => updateSettings({mathSettings: {significantDigits: value}})}\n                    />\n                    <SettingsItem\n                        label=\"settings.number_format\"\n                        options={languageWithInheritOptions}\n                        value={settings.mathSettings.numberFormat}\n                        setter={value => updateSettings({mathSettings: {numberFormat: value}})}\n                    />\n                </ul>\n            </SettingsCard>\n            <SettingsCard>\n                <h1>{t(\"settings.categories.misc\")}</h1>\n                <ul>\n                    <SettingsItem\n                        label=\"settings.use_analytics\"\n                        options={enableOptions}\n                        value={settings.useAnalytics}\n                        setter={value => updateSettings({useAnalytics: value === \"true\"})}\n                    />\n                </ul>\n            </SettingsCard>\n        </Container>\n    )\n}\n\nexport default Settings","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport {RootState} from \"../../../store\";\nimport {changeCurrentInput} from \"../../../store/session/actions\";\n\nconst Synopsis = styled.dt<{copyable: boolean}>`\n    padding: 10px;\n    margin: 0;\n    ${props => props.copyable ? `&:hover {\n        background-color: rgba(0, 0, 0, 0.1);\n    }` : null}\n`;\n\nconst Description = styled.dd`\n    display: flex;\n    flex-direction: column;\n    align-items: start;\n    padding: 10px;\n    margin: 0;\n`;\n\ninterface Props {\n    synopsis: string,\n    synopsisIsMath?: boolean,\n    description: string,\n    copyOnClick: boolean\n}\n\nconst ManualItem: React.FC<Props> = ({synopsis, description, copyOnClick, synopsisIsMath}) => {\n    const copyManualContentOnClick = useSelector((state: RootState) => state.settings.interfaceSettings.copyManualContentOnClick);\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const copyable = copyOnClick && copyManualContentOnClick;\n\n    const synopsisOnClick = () => {\n        if (copyable) {\n            dispatch(changeCurrentInput(synopsis));\n            history.push(\"/\");\n        }\n    }\n\n    const roles = [];\n    if (copyOnClick) roles.push(\"button\");\n    if (synopsisIsMath) roles.push(\"math\");\n    const role = roles.join(\" \");\n\n    return (\n        <>\n            <Synopsis\n                onClick={synopsisOnClick}\n                copyable={copyable}\n                {...(role.length > 0 ? {role: role} : {})}\n            >\n                {synopsis}\n            </Synopsis>\n            <Description>\n                {description.split(\"<br>\").map(line => <span>{line}</span>)}\n            </Description>\n        </>\n    )\n}\n\nexport default ManualItem;","export const escapeRegExp = (str: string) => str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\nexport const camelToSnakeCase = (str: string) => str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`);","import React from \"react\";\nimport styled from \"styled-components\";\nimport {Language} from \"../../../store/settings/types\";\nimport Card from \"../../common/Card\";\nimport ManualItem from \"./ManualItem\";\nimport {useTranslation} from \"react-i18next\";\nimport {escapeRegExp} from \"../../../utils\";\n\nconst Container = styled(Card)`\n  margin-bottom: 20px;\n\n  & dl {\n    list-style-type: none;\n    margin: 0;\n    padding: 20px;\n    display: grid;\n    grid-template-columns: 3fr 7fr;\n    grid-column-gap: 10px;\n  }\n\n`;\n\ninterface Props {\n    title: string,\n    language: Language,\n    items: any,\n    filter: string,\n    copyOnClick?: boolean,\n    synopsisIsMath?: boolean\n}\n\nconst ManualCategory: React.FC<Props> = ({\n                                             title,\n                                             language,\n                                             items,\n                                             filter,\n                                             copyOnClick,\n                                             synopsisIsMath\n                                         }) => {\n    const [t] = useTranslation();\n\n    const filterFunction = (item: any) => item.synopsis[language].match(escapeRegExp(filter))\n        || item.description[language].match(escapeRegExp(filter));\n\n    if (items.filter(filterFunction).length === 0)\n        return null;\n\n    return (\n        <Container>\n            <h1>{t(title)}</h1>\n            <dl>\n                {\n                    items.filter(filterFunction).map((item: any, key: number) => (\n                        <ManualItem\n                            key={key}\n                            copyOnClick={!!copyOnClick}\n                            synopsisIsMath={!!synopsisIsMath}\n                            synopsis={item.synopsis[language]}\n                            description={item.description[language]}\n                        />\n                    ))\n                }\n            </dl>\n        </Container>\n    );\n};\n\nexport default ManualCategory;","import React, {useRef, useState} from \"react\";\nimport styled from \"styled-components\";\nimport ManualCategory from \"./ManualCategory\";\nimport {useSelector} from \"react-redux\";\nimport {RootState} from \"../../../store\";\nimport InputText from \"../../common/InputText\";\nimport hotkeys from \"../../../hotkeys.json\";\n\n// @ts-ignore\nimport nd from \"@behrenle/number-drive\"\nimport {useTranslation} from \"react-i18next\";\nimport useRefEffect from \"../../../hooks/useRefEffect\";\nimport {camelToSnakeCase} from \"../../../utils\";\nimport usePageView from \"../../../hooks/usePageView\";\n\nconst Container = styled.div`\n    padding: 20px 15%;\n`;\n\ninterface HotkeysManualObject {\n    [key: string]: string | HotkeysManualObject\n}\n\nconst getHotkeysManual = (items: HotkeysManualObject = hotkeys, t: (s: string) => string, baseStr = \"\") => {\n    let entries: {synopsis: {de: string, en: string}, description: {de: string, en: string}}[] = [];\n    Object.entries(items).forEach(([key, value]) => {\n        if (typeof value === \"string\") {\n            const synopsis = value.replaceAll(\"+\", \" + \").toUpperCase();\n            const description = t(`manual.${baseStr ? baseStr + \".\" : \"\"}hotkey_${camelToSnakeCase(key)}`);\n            entries.push({\n                synopsis: {de: synopsis, en: synopsis},\n                description: {de: description, en: description}\n            });\n        } else if (typeof value === \"object\") {\n            entries = entries.concat(getHotkeysManual(value, t, key));\n        } else {\n            console.error(\"invalid hotkeys file format\");\n            return;\n        }\n\n    });\n    return entries;\n}\n\nconst Manual: React.FC = () => {\n    usePageView(\"/manual\");\n    const [filter, setFilter] = useState(\"\");\n    const language = useSelector((state: RootState) => state.settings.interfaceSettings.language);\n    const searchRef = useRef<HTMLInputElement>(null);\n    const [t] = useTranslation();\n    const hotkeysManualItems = getHotkeysManual(undefined, t)\n    useRefEffect(searchRef, r => r.current.focus());\n\n    return (\n        <Container>\n            <InputText\n                type=\"text\"\n                role=\"search\"\n                aria-label={t(\"search.search_label\")}\n                style={{marginBottom: \"20px\"}}\n                placeholder={t(\"manual.search\")}\n                value={filter}\n                ref={searchRef}\n                onChange={(event: React.ChangeEvent<HTMLInputElement>) => setFilter(event.target.value)}\n            />\n            <ManualCategory\n                title=\"manual.hotkeys\"\n                language={language}\n                items={hotkeysManualItems}\n                filter={filter}\n            />\n            <ManualCategory\n                title=\"manual.constants\"\n                language={language}\n                items={nd.Manual.constants}\n                filter={filter}\n                copyOnClick={true}\n                synopsisIsMath={true}\n            />\n            <ManualCategory\n                title=\"manual.functions\"\n                language={language}\n                items={nd.Manual.functions}\n                filter={filter}\n                copyOnClick={true}\n                synopsisIsMath={true}\n            />\n        </Container>\n    )\n}\n\nexport default Manual","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst List = styled.ul`\n    padding: 20px;\n    list-style-type: none;\n    margin: 0;\n`;\n\ntype ItemValue = string | string[];\n\ntype ItemProps = [ItemValue, ItemValue];\n\ninterface ListProps {\n    items: ItemProps[]\n}\n\nconst CenteredDefinitionList: React.FC<ListProps> = ({items}) => {\n    return (\n        <List>\n            {\n                items.map(item => (\n                    <ListItem item={item}/>\n                ))\n            }\n        </List>\n    );\n};\n\nconst Item = styled.li`\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 20px;\n    padding: 0.1em;\n`;\n\nconst ListItem: React.FC<{item: ItemProps}> = ({item}) => {\n    const leftValue = item[0];\n    const rightValue = item[1];\n    return (\n        <Item>\n            <ListItemContent value={leftValue} align=\"right\"/>\n            <ListItemContent value={rightValue} align=\"left\"/>\n        </Item>\n    )\n}\n\nconst Content = styled.div<{align: \"left\" | \"right\"}>`\n    display: flex;\n    flex-direction: column;\n    align-items: ${props => props.align === \"left\" ? \"flex-start\" : \"flex-end\"};\n`;\n\nconst ListItemContent: React.FC<{value: ItemValue, align: \"left\" | \"right\"}> = ({value, align}) => {\n    const lines = typeof value === \"string\" ? [value] : value;\n    return (\n        <Content align={align}>\n            {lines.map((line, index) => (\n                <span key={index}>{line}</span>\n            ))}\n        </Content>\n    )\n}\n\nexport default CenteredDefinitionList;","import React from \"react\";\nimport styled from \"styled-components\";\nimport Card from \"../../common/Card\";\nimport CenteredDefinitionList from \"./CenteredDefinitionList\";\nimport {author, dependencies, license, version, contributors} from \"../../../../package.json\";\nimport {useTranslation} from \"react-i18next\";\nimport usePageView from \"../../../hooks/usePageView\";\nimport {Link} from \"react-router-dom\";\n\nconst Container = styled.div`\n    padding: 20px 15%;\n`;\n\nconst Content = styled.div`\n    padding: 20px;\n`;\n\n\nconst About: React.FC = () => {\n    usePageView(\"/about\");\n    const [t] = useTranslation();\n\n    return (\n        <Container>\n            <Card>\n                <h1>{t(\"about.general\")}</h1>\n                <CenteredDefinitionList\n                    items={[\n                        [t(\"about.version\"), version],\n                        [t(\"about.author\"), [author.name, author.email]],\n                        [t(\"about.contributors\"), contributors.map(c => c.name)],\n                        [t(\"about.license\"), license],\n                    ]}\n                />\n                <Content>\n                    {t(\"about.further_information\")}\n                    <ul>\n                        <li>\n                            <Link to=\"/privacy-policy\">Privacy Policy</Link>\n                        </li>\n                        <li>\n                            <Link to=\"/cookie-policy\">Cookie Policy</Link>\n                        </li>\n                        <li>\n                            <Link to=\"/terms-of-service\">Terms of Service</Link>\n                        </li>\n                    </ul>\n                </Content>\n            </Card>\n            <Card style={{marginTop: \"20px\"}}>\n                <h1>{t(\"about.dependencies\")}</h1>\n                <CenteredDefinitionList\n                    items={\n                        Object.entries(dependencies).map(dep => [\n                            dep[0],\n                            dep[1].charAt(0) === \"^\"\n                                ? dep[1].substring(1)\n                                : dep[1]\n                        ])\n                    }\n                />\n                <Content // todo maybe replace with trans component because html injection is unsafe\n                    dangerouslySetInnerHTML={{\n                        __html: t(\"about.more_info\", {url: \"https://www.npmjs.com/\", label: \"npmjs.com\"})\n                    }}\n                />\n            </Card>\n        </Container>\n    )\n}\n\nexport default About","import Calculator from \"../views/calculator/Calculator\";\nimport Settings from \"../views/settings/Settings\";\nimport Manual from \"../views/manual/Manual\";\nimport About from \"../views/about/About\";\n\nexport const routes = [\n    {name: \"navbar.calculator\", path: \"/\", render: () => <Calculator/>},\n    {name: \"navbar.settings\", path: \"/settings\", render: () => <Settings/>},\n    {name: \"navbar.manual\", path: \"/manual\", render: () => <Manual/>},\n    {name: \"navbar.about\", path: \"/about\", render: () => <About/>}\n];\n\nexport const navbarProps = {\n    title: `Math Explorer`,\n    items: routes.map(view => {\n        return {name: view.name, path: view.path}\n    })\n};","import React from \"react\";\nimport Card from \"../../common/Card\";\nimport styled from \"styled-components\";\nimport usePageView from \"../../../hooks/usePageView\";\n\nconst Wrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  padding: 20px 15%;\n`;\n\nconst Container = styled(Card)`\n  padding-bottom: 20px;\n\n  & p, ul {\n    margin: 20px;\n  }\n`;\n\nconst PrivacyPolicy: React.FC = () => {\n    usePageView(\"/privacy-policy\");\n\n    return (\n        <Wrapper>\n            <Container>\n                <h1>Privacy Policy for Math Explorer</h1>\n\n                <p>At Math Explorer, accessible from https://behrenle.github.io/mathexplorer, one of our main priorities\n                    is the privacy of our visitors. This Privacy Policy document contains types of information that is\n                    collected and recorded by Math Explorer and how we use it.</p>\n\n                <p>If you have additional questions or require more information about our Privacy Policy, do not\n                    hesitate to contact us.</p>\n\n                <p>This Privacy Policy applies only to our online activities and is valid for visitors to our website\n                    with regards to the information that they shared and/or collect in Math Explorer. This policy is not\n                    applicable to any information collected offline or via channels other than this website. Our Privacy\n                    Policy was created with the help of the <a href=\"https://www.privacypolicygenerator.info\">Privacy\n                        Policy Generator</a> and the <a href=\"https://www.privacypolicyonline.com\">Free Privacy Policy\n                        Generator</a>.</p>\n\n                <h2>Consent</h2>\n\n                <p>By using our website, you hereby consent to our Privacy Policy and agree to its terms.</p>\n\n                <h2>Information we collect</h2>\n\n                <p>The personal information that you are asked to provide, and the reasons why you are asked to provide\n                    it, will be made clear to you at the point we ask you to provide your personal information.</p>\n                <p>If you contact us directly, we may receive additional information about you such as your name, email\n                    address, phone number, the contents of the message and/or attachments you may send us, and any other\n                    information you may choose to provide.</p>\n                <p>When you register for an Account, we may ask for your contact information, including items such as\n                    name, company name, address, email address, and telephone number.</p>\n\n                <h2>How we use your information</h2>\n\n                <p>We use the information we collect in various ways, including to:</p>\n\n                <ul>\n                    <li>Provide, operate, and maintain our webste</li>\n                    <li>Improve, personalize, and expand our webste</li>\n                    <li>Understand and analyze how you use our webste</li>\n                    <li>Develop new products, services, features, and functionality</li>\n                    <li>Communicate with you, either directly or through one of our partners, including for customer\n                        service, to provide you with updates and other information relating to the webste, and for\n                        marketing and promotional purposes\n                    </li>\n                    <li>Send you emails</li>\n                    <li>Find and prevent fraud</li>\n                </ul>\n\n                <h2>Log Files</h2>\n\n                <p>Math Explorer follows a standard procedure of using log files. These files log visitors when they\n                    visit websites. All hosting companies do this and a part of hosting services' analytics. The\n                    information collected by log files include internet protocol (IP) addresses, browser type, Internet\n                    Service Provider (ISP), date and time stamp, referring/exit pages, and possibly the number of\n                    clicks. These are not linked to any information that is personally identifiable. The purpose of the\n                    information is for analyzing trends, administering the site, tracking users' movement on the\n                    website, and gathering demographic information.</p>\n\n                <h2>Cookies and Web Beacons</h2>\n\n                <p>Like any other website, Math Explorer uses 'cookies'. These cookies are used to store information\n                    including visitors' preferences, and the pages on the website that the visitor accessed or visited.\n                    The information is used to optimize the users' experience by customizing our web page content based\n                    on visitors' browser type and/or other information.</p>\n\n                <p>For more general information on cookies, please read <a\n                    href=\"https://www.cookieconsent.com/what-are-cookies/\">\"What Are Cookies\" from Cookie Consent</a>.\n                </p>\n\n\n                <h2>Advertising Partners Privacy Policies</h2>\n\n                <p>You may consult this list to find the Privacy Policy for each of the advertising partners of Math\n                    Explorer.</p>\n\n                <p>Third-party ad servers or ad networks uses technologies like cookies, JavaScript, or Web Beacons that\n                    are used in their respective advertisements and links that appear on Math Explorer, which are sent\n                    directly to users' browser. They automatically receive your IP address when this occurs. These\n                    technologies are used to measure the effectiveness of their advertising campaigns and/or to\n                    personalize the advertising content that you see on websites that you visit.</p>\n\n                <p>Note that Math Explorer has no access to or control over these cookies that are used by third-party\n                    advertisers.</p>\n\n                <h2>Third Party Privacy Policies</h2>\n\n                <p>Math Explorer's Privacy Policy does not apply to other advertisers or websites. Thus, we are advising\n                    you to consult the respective Privacy Policies of these third-party ad servers for more detailed\n                    information. It may include their practices and instructions about how to opt-out of certain\n                    options. </p>\n\n                <p>You can choose to disable cookies through your individual browser options. To know more detailed\n                    information about cookie management with specific web browsers, it can be found at the browsers'\n                    respective websites.</p>\n\n                <h2>CCPA Privacy Rights (Do Not Sell My Personal Information)</h2>\n\n                <p>Under the CCPA, among other rights, California consumers have the right to:</p>\n                <p>Request that a business that collects a consumer's personal data disclose the categories and specific\n                    pieces of personal data that a business has collected about consumers.</p>\n                <p>Request that a business delete any personal data about the consumer that a business has\n                    collected.</p>\n                <p>Request that a business that sells a consumer's personal data, not sell the consumer's personal\n                    data.</p>\n                <p>If you make a request, we have one month to respond to you. If you would like to exercise any of\n                    these rights, please contact us.</p>\n\n                <h2>GDPR Data Protection Rights</h2>\n\n                <p>We would like to make sure you are fully aware of all of your data protection rights. Every user is\n                    entitled to the following:</p>\n                <p>The right to access  You have the right to request copies of your personal data. We may charge you a\n                    small fee for this service.</p>\n                <p>The right to rectification  You have the right to request that we correct any information you\n                    believe is inaccurate. You also have the right to request that we complete the information you\n                    believe is incomplete.</p>\n                <p>The right to erasure  You have the right to request that we erase your personal data, under certain\n                    conditions.</p>\n                <p>The right to restrict processing  You have the right to request that we restrict the processing of\n                    your personal data, under certain conditions.</p>\n                <p>The right to object to processing  You have the right to object to our processing of your personal\n                    data, under certain conditions.</p>\n                <p>The right to data portability  You have the right to request that we transfer the data that we have\n                    collected to another organization, or directly to you, under certain conditions.</p>\n                <p>If you make a request, we have one month to respond to you. If you would like to exercise any of\n                    these rights, please contact us.</p>\n\n                <h2>Children's Information</h2>\n\n                <p>Another part of our priority is adding protection for children while using the internet. We encourage\n                    parents and guardians to observe, participate in, and/or monitor and guide their online\n                    activity.</p>\n\n                <p>Math Explorer does not knowingly collect any Personal Identifiable Information from children under\n                    the age of 13. If you think that your child provided this kind of information on our website, we\n                    strongly encourage you to contact us immediately and we will do our best efforts to promptly remove\n                    such information from our records.</p>\n            </Container>\n        </Wrapper>\n    );\n};\n\nexport default PrivacyPolicy;","import React from \"react\";\nimport styled from \"styled-components\";\nimport Card from \"../../common/Card\";\nimport usePageView from \"../../../hooks/usePageView\";\n\nconst Wrapper = styled.div`\n  padding: 20px 15%;\n`;\n\nconst Container = styled(Card)`\n  padding-bottom: 20px;\n\n  & p, ul {\n    margin: 20px;\n  }\n`;\n\nconst CookiePolicy: React.FC = () => {\n    usePageView(\"/cookie-policy\");\n\n    return (\n        <Wrapper>\n            <Container>\n                <h1>Cookie Policy for Math Explorer</h1>\n\n                <p>This is the Cookie Policy for Math Explorer, accessible from https://behrenle.github.io/mathexplorer</p>\n\n                <p><strong>What Are Cookies</strong></p>\n\n                <p>As is common practice with almost all professional websites this site uses cookies, which are tiny files that are downloaded to your computer, to improve your experience. This page describes what information they gather, how we use it and why we sometimes need to store these cookies. We will also share how you can prevent these cookies from being stored however this may downgrade or 'break' certain elements of the sites functionality.</p>\n\n                <p>For more general information on cookies, please read <a href=\"https://www.cookieconsent.com/what-are-cookies/\">\"What Are Cookies\"</a>. Information regarding cookies from this Cookies Policy are from <a href=\"https://www.generateprivacypolicy.com/\">the Privacy Policy Generator</a>.</p>\n\n                <p><strong>How We Use Cookies</strong></p>\n\n                <p>We use cookies for a variety of reasons detailed below. Unfortunately in most cases there are no industry standard options for disabling cookies without completely disabling the functionality and features they add to this site. It is recommended that you leave on all cookies if you are not sure whether you need them or not in case they are used to provide a service that you use.</p>\n\n                <p><strong>Disabling Cookies</strong></p>\n\n                <p>You can prevent the setting of cookies by adjusting the settings on your browser (see your browser Help for how to do this). Be aware that disabling cookies will affect the functionality of this and many other websites that you visit. Disabling cookies will usually result in also disabling certain functionality and features of the this site. Therefore it is recommended that you do not disable cookies. This Cookies Policy was created with the help of the <a href=\"https://www.cookiepolicygenerator.com/cookie-policy-generator/\">Cookies Policy Generator from CookiePolicyGenerator.com</a>.</p>\n                <p><strong>The Cookies We Set</strong></p>\n\n                <ul>\n\n                <li>\n                    <p>Account related cookies</p>\n                    <p>If you create an account with us then we will use cookies for the management of the signup process and general administration. These cookies will usually be deleted when you log out however in some cases they may remain afterwards to remember your site preferences when logged out.</p>\n                </li>\n\n                <li>\n                    <p>Login related cookies</p>\n                    <p>We use cookies when you are logged in so that we can remember this fact. This prevents you from having to log in every single time you visit a new page. These cookies are typically removed or cleared when you log out to ensure that you can only access restricted features and areas when logged in.</p>\n                </li>\n\n\n\n\n\n                <li>\n                    <p>Site preferences cookies</p>\n                    <p>In order to provide you with a great experience on this site we provide the functionality to set your preferences for how this site runs when you use it. In order to remember your preferences we need to set cookies so that this information can be called whenever you interact with a page is affected by your preferences.</p>\n                </li>\n\n                </ul>\n\n                <p><strong>Third Party Cookies</strong></p>\n\n                <p>In some special cases we also use cookies provided by trusted third parties. The following section details which third party cookies you might encounter through this site.</p>\n\n                <ul>\n\n                <li>\n                    <p>This site uses Google Analytics which is one of the most widespread and trusted analytics solution on the web for helping us to understand how you use the site and ways that we can improve your experience. These cookies may track things such as how long you spend on the site and the pages that you visit so we can continue to produce engaging content.</p>\n                    <p>For more information on Google Analytics cookies, see the official Google Analytics page.</p>\n                </li>\n\n                </ul>\n\n                <p><strong>More Information</strong></p>\n\n                <p>Hopefully that has clarified things for you and as was previously mentioned if there is something that you aren't sure whether you need or not it's usually safer to leave cookies enabled in case it does interact with one of the features you use on our site.</p>\n\n                <p>However if you are still looking for more information then you can contact us through one of our preferred contact methods:</p>\n\n                <ul>\n                <li>Email: dev.behrenle@posteo.de</li>\n\n                </ul>\n\n            </Container>\n        </Wrapper>\n    );\n};\n\nexport default CookiePolicy;","import React from \"react\";\nimport styled from \"styled-components\";\nimport Card from \"../../common/Card\";\nimport {Link} from \"react-router-dom\";\nimport {useDispatch} from \"react-redux\";\nimport useSettings from \"../../../hooks/useSettings\";\nimport {setSettings} from \"../../../store/settings/actions\";\n\nconst Container = styled(Card)`\n  padding: 20px;\n  margin: 0 20px 20px 20px;\n  display: flex;\n  font-size: ${props => props.theme.fontSize.s};\n`;\n\nconst Text = styled.span`\n  flex: 1;\n  font-size: inherit;\n\n  & > a {\n    font-size: inherit;\n  }\n`;\n\nconst Button = styled.button`\n  margin-left: 20px;\n  color: inherit;\n  background-color: inherit;\n  padding: 10px 20px;\n  border: 1px solid ${props => props.theme.card.color};\n  //border-radius: 10px;\n  font-size: inherit;\n\n  &:hover {\n    background-color: ${props => props.theme.sidebarItem.hoverBackgroundColor};\n  }\n`;\n\nconst ButtonContainer = styled.div`\n  font-size: inherit;\n`;\n\nconst CookieBanner: React.FC = () => {\n    const dispatch = useDispatch();\n    const settings = useSettings();\n\n    if (settings.cookieBannerHasBeenAccepted)\n        return null;\n\n    const accept = () => {\n        dispatch(setSettings({\n            ...settings,\n            cookieBannerHasBeenAccepted: true,\n            useAnalytics: true\n        }));\n    }\n\n    return (\n        <Container>\n            <Text>\n                By using our site, you acknowledge that you have read and understand\n                our <Link to=\"/cookie-policy\">Cookie Policy</Link>\n                , <Link to=\"/privacy-policy\">Privacy Policy</Link>\n                , and our <Link to=\"/terms-of-service\">Terms of Service</Link>.\n            </Text>\n            <ButtonContainer>\n                <Button onClick={accept}>OK</Button>\n            </ButtonContainer>\n        </Container>\n    )\n}\n\nexport default CookieBanner;","import {InterfaceSettings, MathSettings, Settings, SettingsAction} from \"./types\";\n\nexport const setSettings = (settings: Settings): SettingsAction => {\n    return {\n        type: \"SET_SETTINGS\",\n        payload: settings\n    };\n};\n\nexport const setMathSettings = (mathSettings: MathSettings): SettingsAction => {\n    return {\n        type: \"SET_MATH_SETTINGS\",\n        payload: mathSettings\n    };\n};\n\nexport const setInterfaceSettings = (interfaceSettings: InterfaceSettings): SettingsAction => {\n    return {\n        type: \"SET_INTERFACE_SETTINGS\",\n        payload: interfaceSettings\n    };\n};","import React from \"react\";\nimport Card from \"../../common/Card\";\nimport styled from \"styled-components\";\nimport usePageView from \"../../../hooks/usePageView\";\n\nconst Wrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  padding: 20px 15%;\n`;\n\nconst Container = styled(Card)`\n  padding-bottom: 20px;\n\n  & p, ul {\n    margin: 20px;\n  }\n`;\n\nconst TermsOfService: React.FC = () => {\n    usePageView(\"/terms-of-service\");\n\n    return (\n        <Wrapper>\n            <Container>\n                <h1>Website Terms and Conditions of Use</h1>\n\n                <h2>1. Terms</h2>\n\n                <p>By accessing this Website, accessible from https://behrenle.github.io/mathexplorer/, you are agreeing to be bound by these Website Terms and Conditions of Use and agree that you are responsible for the agreement with any applicable local laws. If you disagree with any of these terms, you are prohibited from accessing this site. The materials contained in this Website are protected by copyright and trade mark law.</p>\n\n                <h2>2. Use License</h2>\n\n                <p>Permission is granted to temporarily download one copy of the materials on Math Explorer's Website for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:</p>\n\n                <ul>\n                    <li>modify or copy the materials;</li>\n                    <li>use the materials for any commercial purpose or for any public display;</li>\n                    <li>attempt to reverse engineer any software contained on Math Explorer's Website;</li>\n                    <li>remove any copyright or other proprietary notations from the materials; or</li>\n                    <li>transferring the materials to another person or \"mirror\" the materials on any other server.</li>\n                </ul>\n\n                <p>This will let Math Explorer to terminate upon violations of any of these restrictions. Upon termination, your viewing right will also be terminated and you should destroy any downloaded materials in your possession whether it is printed or electronic format. These Terms of Service has been created with the help of the <a href=\"https://www.termsofservicegenerator.net\">Terms Of Service Generator</a> and the <a href=\"https://www.generateprivacypolicy.com\">Privacy Policy Generator</a>.</p>\n\n                <h2>3. Disclaimer</h2>\n\n                <p>All the materials on Math Explorers Website are provided \"as is\". Math Explorer makes no warranties, may it be expressed or implied, therefore negates all other warranties. Furthermore, Math Explorer does not make any representations concerning the accuracy or reliability of the use of the materials on its Website or otherwise relating to such materials or any sites linked to this Website.</p>\n\n                <h2>4. Limitations</h2>\n\n                <p>Math Explorer or its suppliers will not be hold accountable for any damages that will arise with the use or inability to use the materials on Math Explorers Website, even if Math Explorer or an authorize representative of this Website has been notified, orally or written, of the possibility of such damage. Some jurisdiction does not allow limitations on implied warranties or limitations of liability for incidental damages, these limitations may not apply to you.</p>\n\n                <h2>5. Revisions and Errata</h2>\n\n                <p>The materials appearing on Math Explorers Website may include technical, typographical, or photographic errors. Math Explorer will not promise that any of the materials in this Website are accurate, complete, or current. Math Explorer may change the materials contained on its Website at any time without notice. Math Explorer does not make any commitment to update the materials.</p>\n\n                <h2>6. Links</h2>\n\n                <p>Math Explorer has not reviewed all of the sites linked to its Website and is not responsible for the contents of any such linked site. The presence of any link does not imply endorsement by Math Explorer of the site. The use of any linked website is at the users own risk.</p>\n\n                <h2>7. Site Terms of Use Modifications</h2>\n\n                <p>Math Explorer may revise these Terms of Use for its Website at any time without prior notice. By using this Website, you are agreeing to be bound by the current version of these Terms and Conditions of Use.</p>\n\n                <h2>8. Your Privacy</h2>\n\n                <p>Please read our Privacy Policy.</p>\n\n                <h2>9. Governing Law</h2>\n\n                <p>Any claim related to Math Explorer's Website shall be governed by the laws of de without regards to its conflict of law provisions.</p>\n            </Container>\n        </Wrapper>\n    );\n};\n\nexport default TermsOfService;","import Ajv from \"ajv\";\n\nexport default new Ajv();","import validator from \"../jsonValidator\";\n\nconst documentScheme = {\n    type: \"object\",\n    required: [\"title\", \"cells\"],\n    properties: {\n        title: {type: \"string\"},\n        cells: {\n            type: \"array\",\n            items: {\n                anyOf: [\n                    {\n                        type: \"object\",\n                        properties: {\n                            type: {enum: [\"MATH\"]},\n                            uuid: {type: \"string\"},\n                            input: {type: \"string\"},\n                            output: {type: \"string\"},\n                        }\n                    },\n                    {\n                        type: \"object\",\n                        properties: {\n                            type: {enum: [\"TEXT\"]},\n                            uuid: {type: \"string\"},\n                            content: {type: \"string\"},\n                        }\n                    }\n                ]\n            }\n        }\n    }\n};\n\nconst validateDocument = (userData: any) => validator.validate(documentScheme, userData);\nexport default validateDocument;\n","import React, {useEffect, useState} from \"react\";\nimport {RouteComponentProps} from \"react-router\";\nimport styled from \"styled-components\";\nimport Card from \"../../common/Card\";\nimport {useHistory} from \"react-router-dom\";\nimport useLoadDocument from \"../../../hooks/useLoadDocument\";\nimport {fetchBin} from \"../../../apis/jsonBin\";\nimport {Document} from \"../../../store/session/types\";\nimport validateDocument from \"../../../validate/validateDocument\";\nimport {useTranslation} from \"react-i18next\";\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n`;\n\nconst StyledCard = styled(Card)`\n  padding: 20px;\n\n  & * {\n    padding: 0;\n    margin: 0;\n  }\n`;\n\ninterface Props {\n    id: string\n}\n\ninterface RouteProps extends RouteComponentProps<Props> {\n}\n\nconst DownloadDocument: React.FC<RouteProps> = ({match}) => {\n    const [loading, setLoading] = useState(true);\n    const [failed, setFailed] = useState(false);\n    const [t] = useTranslation();\n    const history = useHistory();\n    const loadDocument = useLoadDocument();\n    useEffect(() => {\n        if (!loading && !failed)\n            history.push(\"/\");\n    }, [loading, failed]);\n    useEffect(() => {\n        fetchBin(match.params.id)\n            .then(doc => {\n                const valid = validateDocument(doc);\n                if (valid) {\n                    loadDocument(doc as Document);\n                } else {\n                    setFailed(true);\n                }\n                setLoading(false);\n            })\n            .catch(console.error);\n    }, []);\n\n    return (\n        <Container>\n            <StyledCard>\n                {\n                    loading\n                        ? <p>{t(\"download.loading-document\")} {match.params.id}</p>\n                        : failed\n                            ? <p>{t(\"download.download-error\")}</p>\n                            : <p>{t(\"download.successful\")}</p>\n                }\n            </StyledCard>\n        </Container>\n    );\n};\n\nexport default DownloadDocument;","import React from \"react\";\nimport {RouteComponentProps} from \"react-router\";\nimport styled from \"styled-components\";\nimport Card from \"../../common/Card\";\nimport {useHistory} from \"react-router-dom\";\nimport {useTranslation} from \"react-i18next\";\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n`;\n\nconst StyledCard = styled(Card)`\n  padding: 20px;\n\n  & * {\n    padding: 0;\n    margin: 0;\n  }\n`;\n\nconst Button = styled.button`\n  background-color: inherit;\n  color: inherit;\n  border: 2px solid ${props => props.theme.card.color};\n  padding: 5px 10px;\n  margin-right: 20px;\n  \n  &:hover {\n    background-color: ${props => props.theme.sidebarItem.hoverBackgroundColor};\n  }\n`;\n\ninterface Props {\n    id: string\n}\n\ninterface RouteProps extends RouteComponentProps<Props> {}\n\nconst UploadDocument: React.FC<RouteProps> = ({match}) => {\n    const history = useHistory();\n    const path = \"https://behrenle.github.io/mathexplorer\";\n    const uploadUrl = `${path}/#/download-document/${match.params.id}`;\n    const [t] = useTranslation();\n\n    const copyUrl = () => {\n        navigator.clipboard.writeText(uploadUrl).catch(console.error);\n    }\n\n    return (\n        <Container>\n            <StyledCard>\n                <div>\n                    <Button onClick={copyUrl}>{t(\"upload.copy\")}</Button>\n                    <Button onClick={history.goBack}>{t(\"upload.back\")}</Button>\n                </div>\n                <a href={uploadUrl}>{uploadUrl}</a>\n            </StyledCard>\n        </Container>\n    );\n};\n\nexport default UploadDocument","import React from 'react';\nimport {Route, Switch} from \"react-router-dom\";\nimport \"../../i18n/index\";\nimport styled, {ThemeProvider} from \"styled-components\";\nimport Navbar from \"./navbar/Navbar\";\nimport useTheme from \"../../hooks/useTheme\";\nimport GlobalStyle from \"./GlobalStyle\";\nimport {routes, navbarProps} from \"./appConfig\";\nimport PrivacyPolicy from \"../views/privacyPolicy/PrivacyPolicy\";\nimport CookiePolicy from \"../views/cookiePolicy/CookiePolicy\";\nimport CookieBanner from \"./cookieBanner/CookieBanner\";\nimport TermsOfService from \"../views/termsOfService/TermsOfService\";\nimport DownloadDocument from \"../views/loadDocument/DownloadDocument\";\nimport UploadDocument from \"../views/uploadDocument/UploadDocument\";\n\n\nconst Content = styled.main`\n  z-index: 0;\n  overflow-y: auto;\n`;\n\nconst App: React.FC = () => {\n    const theme = useTheme();\n\n    return (\n        <ThemeProvider theme={theme}>\n            <GlobalStyle/>\n            <>\n                <Navbar {...navbarProps}/>\n                <Content>\n                    <Switch>\n                        {routes.map((route, i) => (\n                            <Route\n                                key={i}\n                                exact path={route.path}\n                                render={route.render}\n                            />\n                        ))}\n                        <Route exact path=\"/privacy-policy\" component={PrivacyPolicy}/>\n                        <Route exact path=\"/cookie-policy\" component={CookiePolicy}/>\n                        <Route exact path=\"/terms-of-service\" component={TermsOfService}/>\n                        <Route exact path=\"/download-document/:id\" component={DownloadDocument}/>\n                        <Route exact path=\"/upload-document/:id\" component={UploadDocument}/>\n                    </Switch>\n                </Content>\n                <CookieBanner/>\n            </>\n        </ThemeProvider>\n    );\n};\n\nexport default App;\n","import {Settings} from \"./types\";\nimport {storeId} from \"./storeId.json\";\n\nconst defaultSettings: Settings = {\n    id: storeId,\n    useAnalytics: false,\n    cookieBannerHasBeenAccepted: false,\n    mathSettings: {\n        numberFormat: \"inherit\",\n        significantDigits: 6\n    },\n    interfaceSettings: {\n        cellLanguageTag: \"inherit\",\n        language: \"de\",\n        inputForm: \"simple\",\n        showBackgroundImage: true,\n        copyManualContentOnClick: true,\n        copyCellContentOnClick: true,\n        showLineNumbers: true,\n        theme: \"light\",\n        fontSize: \"normal\"\n    }\n};\n\nconst localStorageSettingsKey = \"settings\";\n\nexport const loadSettings = (): Settings => {\n    const settingsData = localStorage.getItem(localStorageSettingsKey);\n    const settings = settingsData !== undefined && settingsData !== null\n        ? JSON.parse(settingsData)\n        : {};\n\n    const state = {\n        ...defaultSettings,\n        ...settings,\n        interfaceSettings: {...defaultSettings.interfaceSettings, ...settings.interfaceSettings},\n        mathSettings: {...defaultSettings.mathSettings, ...settings.mathSettings},\n        id: defaultSettings.id\n    };\n\n    if (settings.id != defaultSettings.id)\n        saveSettings(state);\n\n    return state;\n};\n\nexport const saveSettings = (settings: Settings) => {\n    localStorage.removeItem(localStorageSettingsKey); // kind of unnecessary lol\n    localStorage.setItem(localStorageSettingsKey, JSON.stringify(settings));\n    return settings;\n};\n\n","import {Settings, SettingsAction} from \"./types\";\nimport {loadSettings, saveSettings} from \"./settingsUtils\";\nimport i18n from \"../../i18n/index\";\n\nconst initialState = loadSettings();\n\n/* todo use redux-create-reducer package */\nconst settingsReducer = (state = initialState, action: SettingsAction): Settings => {\n    switch (action.type) {\n        case \"SET_SETTINGS\":\n            // @ts-ignore\n            document.getElementsByTagName(\"html\").item(0).lang = action.payload.interfaceSettings.language;\n            i18n.changeLanguage(action.payload.interfaceSettings.language).catch(console.error);\n            return saveSettings(action.payload);\n\n        case \"SET_INTERFACE_SETTINGS\":\n            return settingsReducer(state, {\n                type: \"SET_SETTINGS\",\n                payload: {...state, interfaceSettings: action.payload}\n            });\n\n        case \"SET_MATH_SETTINGS\":\n            return settingsReducer(state, {\n                type: \"SET_SETTINGS\",\n                payload: {...state, mathSettings: action.payload}\n            });\n\n        default:\n            i18n.changeLanguage(state.interfaceSettings.language).catch(console.error)\n            return state;\n    }\n};\n\nexport default settingsReducer;","import {Cell, MathCell, PushMathCell, Session, SessionAction} from \"./types\";\nimport {createReducer} from \"redux-create-reducer\";\nimport {v4 as uuid} from \"uuid\";\n// todo ts declaration file for number-drive or write ts version of numberdrive\n// @ts-ignore\nimport numberdrive from \"@behrenle/number-drive\";\nimport {Language, SignificantDigits} from \"../settings/types\";\n\nconst script = new numberdrive.Script(\"en\",);\nconst defaultState: Session = {\n    currentInput: \"\",\n    selectedCell: -1,\n    editCell: false,\n    document: {\n        title: \"\",\n        cells: []\n    }\n};\n\nconst evaluateInput = (input: string, lang: Language, sigDigits: SignificantDigits): string => {\n    if (input.length > 0) {\n        script.evaluate(input, lang, parseInt(sigDigits + \"\"));\n        const output = script.getItems().slice(-1)[0].output;\n        return output ? output : \"\";\n    }\n    return \"\";\n}\n\nconst clearScope = () => {\n    script.clearUserScope();\n};\n\nconst sessionReducer = createReducer<Session, SessionAction>(defaultState, {\n    CHANGE_CURRENT_INPUT: (state, action) => ({...state, currentInput: action.payload}),\n\n    CLEAR_CURRENT_INPUT: (state) => ({...state, currentInput: \"\"}),\n\n    CLEAR_DOCUMENT_CELLS: (state) => ({...state, document: defaultState.document}),\n\n    CLEAR_MATH_USER_SCOPE: (state) => {\n        clearScope();\n        return state;\n    },\n\n    PUSH_MATH_CELL: (state, action: PushMathCell) => {\n        if (action.payload.content.length > 0) {\n            const nextState = {...state};\n            nextState.document.cells = nextState.document.cells.concat([{\n                type: \"MATH\",\n                uuid: uuid(),\n                input: action.payload.content,\n                output: evaluateInput(action.payload.content, action.payload.language, action.payload.significantDigits)\n            }]);\n            return nextState;\n        }\n        return {\n            ...state, document: {\n                ...state.document, cells: state.document.cells.concat([{\n                    type: \"MATH\",\n                    uuid: uuid(),\n                    input: \"\",\n                    output: \"\",\n                }])\n            }\n        }\n    },\n\n    PUSH_TEXT_CELL: (state, action) => {\n        const nextState = {...state};\n        nextState.document.cells = nextState.document.cells.concat([{\n            type: \"TEXT\",\n            uuid: uuid(),\n            content: action.payload\n        }]);\n        return nextState;\n    },\n\n    UPDATE_MATH_CELL: (state, action) => {\n        const selectedCell = state.document.cells[action.payload.index];\n        if (selectedCell) {\n            const updatedCell: MathCell = {\n                type: \"MATH\",\n                uuid: state.document.cells[action.payload.index].uuid,\n                input: action.payload.input,\n                output: evaluateInput(\n                    action.payload.input,\n                    action.payload.language,\n                    action.payload.significantDigits\n                )\n            };\n            const nextState = {...state};\n            if (action.payload.input.length > 0) {\n                nextState.document.cells[action.payload.index] = updatedCell;\n            } else {\n                nextState.document.cells = nextState.document.cells\n                    .filter((_, i) => i !== action.payload.index);\n            }\n            return nextState;\n        }\n        return state;\n    },\n\n    SELECT_CELL: (state, action) => ({...state, selectedCell: action.payload}),\n\n    SET_EDIT_CELL: (state, action) => {\n        const nextState = {...state};\n        nextState.editCell = action.payload;\n        return nextState;\n    },\n\n    UPDATE_TEXT_CELL: (state, action) => {\n        const nextState = {...state};\n        if (action.payload.content.length > 0) {\n            nextState.document.cells[action.payload.index] = {\n                type: \"TEXT\",\n                uuid: state.document.cells[action.payload.index].uuid,\n                content: action.payload.content\n            };\n        } else {\n            nextState.document.cells = nextState.document.cells\n                .filter((_, i) => i !== action.payload.index);\n        }\n        return nextState;\n    },\n\n    REFRESH_MATH_CELLS: (state, action) => {\n        clearScope();\n        const updatedCells = state.document.cells.map((cell: Cell): Cell => cell.type === \"MATH\"\n            ? {\n                type: \"MATH\",\n                uuid: cell.uuid,\n                input: cell.input,\n                output: evaluateInput(cell.input, action.payload.language, action.payload.significantDigits)\n            } : cell);\n        const nextState = {...state};\n        nextState.document.cells = updatedCells;\n        return nextState;\n    },\n\n    DELETE_CELL: (state, action) => {\n        const nextState = {...state};\n        nextState.document.cells = state.document.cells.filter((_, i) => i !== action.payload);\n        return nextState;\n    },\n\n    LOAD_DOCUMENT: (state, action) => {\n        return {...state, document: action.payload};\n    },\n\n    MOVE_CELL_SELECTION_UP: (state) => {\n        return {\n            ...state,\n            selectedCell: Math.max(state.selectedCell - 1, 0)\n        };\n    },\n\n    MOVE_CELL_SELECTION_DOWN: (state) => {\n        return {\n            ...state,\n            selectedCell: Math.min(state.selectedCell + 1, state.document.cells.length - 1)\n        };\n    }\n});\n\nexport default sessionReducer;","import {combineReducers} from \"redux\";\nimport settingsReducer from \"./settings/reducers\";\nimport sessionReducer from \"./session/reducers\";\n\nexport const rootReducer = combineReducers({\n    settings: settingsReducer,\n    session: sessionReducer\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n","import React from \"react\";\nimport {HashRouter} from \"react-router-dom\";\nimport {Provider} from \"react-redux\";\nimport App from \"./App\";\nimport initStore from \"../../store/createStore\";\n\nconst store = initStore();\n\nconst AppWrapper: React.FC = () => {\n    return (\n        <Provider store={store}>\n            <HashRouter>\n                <App/>\n            </HashRouter>\n        </Provider>\n    )\n}\n\nexport default AppWrapper","import {createStore} from \"redux\";\nimport {rootReducer} from \"./index\";\n\nconst initStore = () => createStore(rootReducer);\nexport default initStore;","// tslint:disable:no-console\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the 'N+1' visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n    window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\nexport function register() {\n    if (\"serviceWorker\" in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(\n            process.env.PUBLIC_URL!,\n            window.location.toString(),\n        );\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener(\"load\", () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Lets check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        \"This web app is being served cache-first by a service \" +\n                        \"worker. To learn more, visit https://goo.gl/SC7cgQ\",\n                    );\n                });\n            } else {\n                // Is not local host. Just register service worker\n                registerValidSW(swUrl);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl: string) {\n    navigator.serviceWorker\n        .register(swUrl, {scope: \".\"})\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker) {\n                    installingWorker.onstatechange = () => {\n                        if (installingWorker.state === \"installed\") {\n                            if (navigator.serviceWorker.controller) {\n                                // At this point, the old content will have been purged and\n                                // the fresh content will have been added to the cache.\n                                // It's the perfect time to display a 'New content is\n                                // available; please refresh.' message in your web app.\n                                console.log(\"New content is available; please refresh.\");\n                            } else {\n                                // At this point, everything has been precached.\n                                // It's the perfect time to display a\n                                // 'Content is cached for offline use.' message.\n                                console.log(\"Content is cached for offline use.\");\n                            }\n                        }\n                    };\n                }\n            };\n        })\n        .catch(error => {\n            console.error(\"Error during service worker registration:\", error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl: string) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            if (\n                response.status === 404 ||\n                response.headers.get(\"content-type\")!.indexOf(\"javascript\") === -1\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl);\n            }\n        })\n        .catch(() => {\n            console.log(\n                \"No internet connection found. App is running in offline mode.\",\n            );\n        });\n}\n\nexport function unregister() {\n    if (\"serviceWorker\" in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister().catch(console.error);\n        });\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport AppWrapper from \"./components/app/AppWrapper\";\nimport {register as registerServiceWorker} from \"./serviceWorker\";\nimport \"./googlefonts.css\";\nimport {initialize} from \"react-ga\";\nimport {id as analyticsId} from \"./analytics.json\";\n\ninitialize(analyticsId, {\n    //debug: true,\n    gaOptions: {\n        siteSpeedSampleRate: 100\n    }\n});\n\nregisterServiceWorker();\nReactDOM.render(\n    <AppWrapper/>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}